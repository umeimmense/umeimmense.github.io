<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://umeimmense.github.io</id>
    <title>Cool Coding</title>
    <updated>2021-12-02T15:45:23.490Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://umeimmense.github.io"/>
    <link rel="self" href="https://umeimmense.github.io/atom.xml"/>
    <logo>https://umeimmense.github.io/images/avatar.png</logo>
    <icon>https://umeimmense.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, Cool Coding</rights>
    <entry>
        <title type="html"><![CDATA[JavaScript å¼•æ“å¦‚ä½•æå‡å…¶è¿è¡Œæ—¶çš„æ€§èƒ½ï¼Ÿ]]></title>
        <id>https://umeimmense.github.io/post/javascript-yin-qing-ru-he-ti-sheng-qi-yun-xing-shi-de-xing-neng</id>
        <link href="https://umeimmense.github.io/post/javascript-yin-qing-ru-he-ti-sheng-qi-yun-xing-shi-de-xing-neng">
        </link>
        <updated>2021-12-02T14:43:28.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>JavaScript æ˜¯ä¸€é¡¹ä»¤äººå°è±¡æ·±åˆ»çš„æŠ€æœ¯ã€‚ä¸æ˜¯å› ä¸ºå®ƒè®¾è®¡å¾—ç‰¹åˆ«å¥½ï¼Œä¹Ÿä¸æ˜¯å› ä¸ºä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰å¯ä»¥è®¿é—®äº’è”ç½‘çš„è®¾å¤‡éƒ½æ‰§è¡Œ JavaScript ç¨‹åºã€‚ç›¸åï¼ŒJavaScript ä»¤äººå°è±¡æ·±åˆ»ï¼Œæ˜¯å› ä¸ºå®ƒçš„å‡ ä¹æ¯ä¸€ä¸ªç‰¹æ€§éƒ½ä½¿å®ƒæˆä¸ºä¼˜åŒ–çš„å™©æ¢¦ï¼Œä½†æ˜¯å®ƒé€Ÿåº¦å¾ˆå¿«ã€‚</p>
<p>javascript ä¸ºä»€ä¹ˆä¼šæ‰§è¡Œé€Ÿåº¦å¾ˆå¿«å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦å»æ·±å…¥æ¢ç©¶çš„é—®é¢˜ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»”ç»†ç ”ç©¶ä¸åŒ JavaScript å¼•æ“ç”¨äºå®ç°è‰¯å¥½è¿è¡Œæ—¶æ€§èƒ½çš„ä¸€äº›æŠ€æœ¯ï¼Œåœ¨ç ”ç©¶è¿‡ç¨‹ä¸­çœç•¥äº†ä¸€äº›ç»†èŠ‚ï¼Œå¹¶ç®€åŒ–äº†äº‹æƒ…ã€‚æœ¬æ–‡çš„ç›®æ ‡ä¸æ˜¯è®©æ‚¨äº†è§£äº‹ç‰©çš„ç¡®åˆ‡è¿ä½œæ–¹å¼ï¼Œè€Œæ˜¯è®©æ‚¨äº†è§£å¹¶ç†è§£å¼•æ“å¦‚ä½•æå‡å…¶è¿è¡Œæ—¶çš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ã€‚</p>
<h2 id="æ‰§è¡Œæ¨¡å‹">æ‰§è¡Œæ¨¡å‹</h2>
<p>å½“æ‚¨çš„æµè§ˆå™¨ä¸‹è½½ JavaScript æ—¶ï¼Œå…¶é¦–è¦ä»»åŠ¡æ˜¯è®©å®ƒå°½å¿«è¿è¡Œã€‚å®ƒé€šè¿‡å°†ä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç ã€è™šæ‹ŸæœºæŒ‡ä»¤ï¼Œç„¶åå°†å…¶ç§»äº¤ç»™ç†è§£å¦‚ä½•æ‰§è¡Œå®ƒä»¬çš„è§£é‡Šå™¨æˆ–è™šæ‹Ÿæœºæ¥å®ç°ã€‚</p>
<p>æ‚¨å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¼šå°† JavaScript è½¬æ¢ä¸ºè™šæ‹ŸæœºæŒ‡ä»¤è€Œä¸æ˜¯å®é™…çš„æœºå™¨æŒ‡ä»¤ï¼Ÿè¿™æ˜¯ä¸ªå¥½é—®é¢˜ã€‚äº‹å®ä¸Šï¼Œç›´åˆ°æœ€è¿‘ï¼ŒV8ï¼ˆChrome çš„ JavaScript å¼•æ“ï¼‰è¿˜ä¸€ç›´åœ¨åšç›´æ¥è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤çš„å·¥ä½œã€‚</p>
<p>ç‰¹å®šç¼–ç¨‹è¯­è¨€çš„è™šæ‹Ÿæœºé€šå¸¸æ˜¯æ›´å®¹æ˜“ç¼–è¯‘çš„ç›®æ ‡ï¼Œå› ä¸ºå®ƒä¸æºè¯­è¨€çš„å…³ç³»æ›´å¯†åˆ‡ã€‚å®é™…çš„æœºå™¨æœ‰ä¸€ä¸ªæ›´é€šç”¨çš„æŒ‡ä»¤é›†ï¼Œå› æ­¤éœ€è¦æ›´å¤šçš„å·¥ä½œæ¥ç¿»è¯‘ç¼–ç¨‹è¯­è¨€ä»¥å¾ˆå¥½åœ°å¤„ç†è¿™äº›æŒ‡ä»¤ã€‚è¿™ç§å›°éš¾æ„å‘³ç€ç¼–è¯‘éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼ŒåŒæ—¶ä¹Ÿæ„å‘³ç€ JavaScript å¼€å§‹æ‰§è¡Œéœ€è¦æ›´é•¿çš„æ—¶é—´ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç†è§£ JavaScript çš„è™šæ‹Ÿæœºä¹Ÿå¯èƒ½ç†è§£ JavaScript å¯¹è±¡ã€‚å› æ­¤ï¼Œæ‰§è¡Œåƒ object.x è¿™æ ·çš„è¯­å¥æ‰€éœ€çš„è™šæ‹ŸæŒ‡ä»¤å¯èƒ½æ˜¯ä¸€ä¸¤æ¡æŒ‡ä»¤ã€‚ä¸€å°ä¸äº†è§£ JavaScript å¯¹è±¡å¦‚ä½•å·¥ä½œçš„å®é™…æœºå™¨éœ€è¦æ›´å¤šçš„æŒ‡ä»¤æ¥ç¡®å®š .x åœ¨å†…å­˜ä¸­çš„ä½ç½®ä»¥åŠå¦‚ä½•è·å–å®ƒã€‚</p>
<p>è™šæ‹Ÿæœºçš„é—®é¢˜åœ¨äºå®ƒæ˜¯è™šæ‹Ÿçš„, å®ƒæ˜¯ä¸å­˜åœ¨çš„ã€‚æŒ‡ä»¤ä¸èƒ½ç›´æ¥æ‰§è¡Œï¼Œå¿…é¡»åœ¨è¿è¡Œæ—¶è§£é‡Šã€‚è§£é‡Šä»£ç æ€»æ˜¯æ¯”ç›´æ¥æ‰§è¡Œä»£ç æ…¢ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æƒè¡¡ã€‚éœ€è¦åœ¨æ›´å¿«çš„ç¼–è¯‘æ—¶é—´ä¸æ›´å¿«çš„è¿è¡Œæ—¶é—´ä¸­åšä¸€ä¸ªé€‰æ‹©ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ›´å¿«çš„ç¼–è¯‘æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æƒè¡¡ã€‚ç”¨æˆ·ä¸å¤ªå¯èƒ½å…³å¿ƒå•ä¸ªæŒ‰é’®çš„ç‚¹å‡»æ˜¯å¦éœ€è¦ 20 æˆ– 40 æ¯«ç§’çš„æ‰§è¡Œæ—¶é—´ï¼Œå°¤å…¶æ˜¯å½“æŒ‰é’®åªè¢«æŒ‰ä¸‹ä¸€æ¬¡æ—¶ã€‚å¿«é€Ÿç¼–è¯‘ JavaScriptï¼Œå³ä½¿ç”Ÿæˆçš„ä»£ç æ‰§è¡Œé€Ÿåº¦è¾ƒæ…¢ï¼Œä¹Ÿä¼šè®©ç”¨æˆ·æ›´å¿«åœ°æŸ¥çœ‹é¡µé¢å¹¶ä¸é¡µé¢äº¤äº’ã€‚</p>
<p>æœ‰äº›æƒ…å†µåœ¨è®¡ç®—ä¸Šæ˜¯æ˜‚è´µçš„ã€‚è¯¸å¦‚æ¸¸æˆã€è¯­æ³•é«˜äº®ä¹‹ç±»çš„åœºæ™¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å’Œæ‰§è¡Œæœºå™¨æŒ‡ä»¤çš„æ—¶é—´åŠ èµ·æ¥å¯èƒ½ä¼šå‡å°‘æ€»æ‰§è¡Œæ—¶é—´ã€‚é‚£ä¹ˆ JavaScript æ˜¯å¦‚ä½•å¤„ç†è¿™äº›æƒ…å†µçš„å‘¢ï¼Ÿ</p>
<h2 id="ç»å¸¸è¢«æ‰§è¡Œçš„ä»£ç ">ç»å¸¸è¢«æ‰§è¡Œçš„ä»£ç </h2>
<p>æ¯å½“ JavaScript å¼•æ“æ£€æµ‹åˆ°æŸä¸ªå‡½æ•°æ‰§è¡Œäº†å¾ˆå¤šæ¬¡æ—¶ï¼Œå®ƒå°±ä¼šå°†è¯¥å‡½æ•°äº¤ç»™ä¼˜åŒ–ç¼–è¯‘å™¨ã€‚è¯¥ç¼–è¯‘å™¨å°†è™šæ‹ŸæœºæŒ‡ä»¤ç¿»è¯‘æˆå®é™…çš„æœºå™¨æŒ‡ä»¤ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œç”±äºè¯¥å‡½æ•°å·²ç»è¿è¡Œäº†å¤šæ¬¡ï¼Œä¼˜åŒ–ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®ä¹‹å‰çš„è¿è¡Œåšå‡ºä¸€äº›å‡è®¾ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå¯ä»¥æ‰§è¡Œæ¨æµ‹ä¼˜åŒ–ä»¥ç”Ÿæˆæ›´å¿«çš„ä»£ç ã€‚</p>
<p>å¦‚æœè¿™äº›æ¨æµ‹åæ¥è¢«è¯æ˜æ˜¯é”™è¯¯çš„ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ JavaScriptå¼•æ“å¯ä»¥ç®€å•åœ°åˆ é™¤é”™è¯¯çš„å‡½æ•°ï¼Œå¹¶è¿˜åŸä¸ºä½¿ç”¨æœªä¼˜åŒ–ç‰ˆæœ¬ã€‚ä¸€æ—¦è¯¥å‡½æ•°å†è¿è¡Œå‡ æ¬¡ï¼Œå®ƒå°±å¯ä»¥å°è¯•å†æ¬¡å°†å…¶ä¼ é€’ç»™ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œè¿™ä¸€æ¬¡å®ƒä¼šæä¾›æ›´å¤šå¯ç”¨äºæ¨æµ‹ä¼˜åŒ–çš„ä¿¡æ¯ã€‚</p>
<p>æ—¢ç„¶æˆ‘ä»¬çŸ¥é“é¢‘ç¹è¿è¡Œçš„å‡½æ•°åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ä½¿ç”¨æ¥è‡ªå…ˆå‰æ‰§è¡Œçš„ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥è¦æ¢ç´¢çš„æ˜¯è¿™æ˜¯ä»€ä¹ˆç±»å‹çš„ä¿¡æ¯ã€‚</p>
<h2 id="ç¿»è¯‘é—®é¢˜">ç¿»è¯‘é—®é¢˜</h2>
<p>JavaScript ä¸­çš„å‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒJavaScript å¯¹è±¡å¾ˆéš¾è®©æœºå™¨å¤„ç†ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="language-javascript">function addFive(obj) {
    return obj.method() + 5;
}
</code></pre>
<p>å°†å‡½æ•°è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤éå¸¸ç®€å•ï¼Œå°±åƒä»å‡½æ•°è¿”å›ä¸€æ ·ã€‚ä½†æ˜¯æœºå™¨ä¸çŸ¥é“å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚è®¿é—®objçš„methodå±æ€§éœ€è¦æ€ä¹ˆç¿»è¯‘å‘¢ï¼Ÿ</p>
<p>å¦‚æœçŸ¥é“ obj æ˜¯ä»€ä¹ˆæ ·å­ä¼šå¾ˆæœ‰å¸®åŠ©ï¼Œä½†åœ¨ JavaScript ä¸­æˆ‘ä»¬æ°¸è¿œæ— æ³•ç¡®å®šã€‚ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥æ·»åŠ æˆ–åˆ é™¤æ–¹æ³•å±æ€§ã€‚å³ä½¿methodç¡®å®å­˜åœ¨ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¹Ÿä¸èƒ½ç¡®å®šå®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ›´ä¸ç”¨è¯´è°ƒç”¨å®ƒä¹‹åçš„è¿”å›å€¼äº†ã€‚</p>
<p>è®©æˆ‘ä»¬å°è¯•å°†ä¸Šè¿°ä»£ç è½¬æ¢ä¸ºæ²¡æœ‰å¯¹è±¡çš„ JavaScript å­é›†ï¼Œæ¥äº†è§£è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤å¯èƒ½æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§è¡¨ç¤ºå¯¹è±¡çš„æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ç§ä»å…¶ä¸­æ£€ç´¢å€¼çš„æ–¹æ³•ã€‚åœ¨æœºå™¨ä»£ç ä¸­æ”¯æŒæ•°ç»„æ˜¯æ¯”è¾ƒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨è¿™æ ·çš„è¡¨ç¤ºï¼š</p>
<pre><code class="language-javascript">// An object like { method: function() {} }
// could be represented as:
// [ [ &quot;method&quot; ], // property names
//   [ function() {} ] ] // property values

function lookup(obj, name) {
  for (var i = 0; i &lt; obj[0].length; i++) {
    if (obj[0][i] === name) return i;
  }
  return -1;
}
</code></pre>
<p>å‚è€ƒä¸Šè¿°çš„è¡¨ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å¯¹ addFive è¿›è¡Œä¸€ä¸ªç®€å•çš„å®ç°</p>
<pre><code class="language-javascript">function addFive(obj) {
  var propertyIndex = lookup(obj, &quot;method&quot;);
  var property = propertyIndex &lt; 0 
      ? undefined 
      : obj[1][propertyIndex];

  if (typeof(property) !== &quot;function&quot;) {
      throw NotAFunction(obj, &quot;method&quot;);
  }
  var callResult = property(/* this */ obj);
  return callResult + 5;
}
</code></pre>
<p>å½“ç„¶ï¼Œè¿™åœ¨ obj.method() è¿”å›çš„ä¸æ˜¯æ•°å­—çš„æƒ…å†µä¸‹ä¸èƒ½è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¨å¾®è°ƒæ•´ä¸€ä¸‹å®ç°ï¼š</p>
<pre><code class="language-javascript">function addFive(obj) {
  var propertyIndex = lookup(obj, &quot;method&quot;);
  var property = propertyIndex &lt; 0 
      ? undefined 
      : obj[1][propertyIndex];

  if (typeof(property) !== &quot;function&quot;) {
      throw NotAFunction(obj, &quot;method&quot;);
  }
  var callResult = property(/* this */ obj);
  if (typeof(callResult) === &quot;string&quot;) {
      return stringConcat(callResult, &quot;5&quot;);
  } else if (typeof(callResult !== &quot;number&quot;) {
      throw NotANumber(callResult);
  }
  
  return callResult + 5;
}
</code></pre>
<p>è¿™æ˜¯èƒ½è¿è¡Œçš„ï¼Œä½†æˆ‘å¸Œæœ›å¾ˆæ˜æ˜¾ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æå‰çŸ¥é“ obj çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ–¹æ³•çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆè¿™æ®µä»£ç å¯ä»¥è·³è¿‡å‡ ä¸ªæ­¥éª¤ã€‚</p>
<h2 id="éšè—ç±»">éšè—ç±»</h2>
<p>ä¸»æµçš„ JavaScript å¼•æ“éƒ½ä»¥æŸç§æ–¹å¼è·Ÿè¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿåœ¨ Chrome ä¸­ï¼Œè¿™ä¸ªæ¦‚å¿µè¢«ç§°ä¸ºéšè—ç±»ã€‚</p>
<p>è®©æˆ‘ä»¬ä»ä»¥ä¸‹ä»£ç ç‰‡æ®µå¼€å§‹ï¼š</p>
<pre><code class="language-javascript">var obj = {}; // empty object
obj.x = 1; // shape has now changed to include a `x` property
obj.toString = function() { return &quot;TODO&quot;; }; // shape changes
delete obj.x; // shape changes again
</code></pre>
<p>å¦‚æœæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°†å¦‚ä½•åœ¨æ·»åŠ å’Œåˆ é™¤æ–°å±æ€§æ—¶è·Ÿè¸ªå¯¹è±¡çš„æ ·å­ï¼Ÿå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸Šä¸€ä¸ªç¤ºä¾‹å°†å¯¹è±¡è¡¨ç¤ºä¸ºæ•°ç»„çš„æƒ³æ³•ï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="language-javascript">var emptyObj__Class = [ 
  null, // No parent hidden class
  [],   // Property names
  []    // Property types
];

var obj = [ 
  emptyObj__Class, // Hidden class of `obj`
  []               // Property values
];

var obj_X__Class = [ 
  emptyObj__Class, // Contains same properties as empty object
  [&quot;x&quot;],           // As well as one property called `x`
  [&quot;number&quot;]       // Where `x` is a number
];

obj[0] = obj_X__Class; // Shape changes
obj[1].push(1);        // value of `x`

var obj_X_ToString__Class = [
  obj_X__Class, // Contains same properties as previous shape
  [&quot;toString&quot;], // And one property called `toString`
  [&quot;function&quot;]  // Where `toString` is a function
];

obj[0] = obj_X_ToString__Class;             // shape change
obj[1].push(function() { return &quot;TODO&quot;; }); // `toString` value

var obj_ToString__Class = [
  null, // Starting from scratch when deleting `x`
  [&quot;toString&quot;], 
  [&quot;function&quot;] 
];

obj[0] = obj_ToString__Class;
obj[1] = [obj[1][1]];
</code></pre>
<p>å¦‚æœæˆ‘ä»¬è¦ç”Ÿæˆè¿™æ ·çš„è™šæ‹ŸæœºæŒ‡ä»¤ï¼Œæˆ‘ä»¬ç°åœ¨å°±æœ‰äº†ä¸€ç§æ–¹æ³•æ¥è·Ÿè¸ªå¯¹è±¡åœ¨ä»»ä½•ç»™å®šæ—¶é—´çš„æ ·å­ã€‚ç„¶è€Œï¼Œè¿™æœ¬èº«å¹¶ä¸èƒ½çœŸæ­£å¸®åŠ©æˆ‘ä»¬ã€‚æˆ‘ä»¬éœ€è¦å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨æœ‰ä»·å€¼çš„åœ°æ–¹ã€‚</p>
<h2 id="å†…è”ç¼“å­˜">å†…è”ç¼“å­˜</h2>
<p>æ¯å½“ JavaScript ä»£ç å¯¹å¯¹è±¡æ‰§è¡Œå±æ€§è®¿é—®æ—¶ï¼ŒJavaScript å¼•æ“éƒ½ä¼šå°†è¯¥å¯¹è±¡çš„éšè—ç±»ä»¥åŠæŸ¥æ‰¾ç»“æœï¼ˆå±æ€§åç§°åˆ°ç´¢å¼•çš„æ˜ å°„ï¼‰å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚è¿™äº›ç¼“å­˜è¢«ç§°ä¸ºå†…è”ç¼“å­˜ï¼Œå®ƒä»¬æœ‰ä¸¤ä¸ªé‡è¦ç›®çš„ï¼š</p>
<ul>
<li>åœ¨æ‰§è¡Œå­—èŠ‚ç æ—¶ï¼Œå¦‚æœæ‰€æ¶‰åŠçš„å¯¹è±¡å…·æœ‰ç¼“å­˜ä¸­çš„éšè—ç±»ï¼Œå®ƒä»¬ä¼šåŠ é€Ÿå±æ€§è®¿é—®ã€‚</li>
<li>åœ¨ä¼˜åŒ–æœŸé—´ï¼Œå®ƒä»¬åŒ…å«æœ‰å…³è®¿é—®å¯¹è±¡å±æ€§æ—¶æ‰€æ¶‰åŠçš„å¯¹è±¡ç±»å‹çš„ä¿¡æ¯ï¼Œè¿™æœ‰åŠ©äºä¼˜åŒ–ç¼–è¯‘å™¨ç”Ÿæˆç‰¹åˆ«é€‚åˆè¿™äº›ç±»å‹çš„ä»£ç ã€‚</li>
</ul>
<p>å†…è”ç¼“å­˜å¯¹å®ƒä»¬å­˜å‚¨ä¿¡æ¯çš„éšè—ç±»çš„æ•°é‡æœ‰é™åˆ¶ã€‚è¿™å¯ä»¥ä¿ç•™å†…å­˜ï¼Œä½†ä¹Ÿç¡®ä¿åœ¨ç¼“å­˜ä¸­æ‰§è¡ŒæŸ¥æ‰¾é€Ÿåº¦å¾ˆå¿«ã€‚å¦‚æœä»å†…è”ç¼“å­˜ä¸­æ£€ç´¢ç´¢å¼•æ¯”ä»éšè—ç±»ä¸­æ£€ç´¢ç´¢å¼•èŠ±è´¹çš„æ—¶é—´æ›´é•¿ï¼Œåˆ™ç¼“å­˜æ²¡æœ‰ä»»ä½•ç”¨å¤„ã€‚</p>
<p>æ®æˆ‘æ‰€çŸ¥ï¼Œ Chromeåœ¨ä¸­ï¼Œå†…è”ç¼“å­˜æœ€å¤šä¼šè·Ÿè¸ª 4 ä¸ªéšè—ç±»ã€‚åœ¨æ­¤ä¹‹åï¼Œå†…è”ç¼“å­˜å°†è¢«ç¦ç”¨ï¼Œä¿¡æ¯å°†å­˜å‚¨åœ¨å…¨å±€ç¼“å­˜ä¸­ã€‚å…¨å±€ç¼“å­˜çš„å¤§å°ä¹Ÿæœ‰é™åˆ¶ï¼Œä¸€æ—¦è¾¾åˆ°é™åˆ¶ï¼Œæ–°æ¡ç›®å°†è¦†ç›–æ—§æ¡ç›®ã€‚</p>
<p>ä¸ºäº†æœ€å¥½åœ°åˆ©ç”¨å†…è”ç¼“å­˜å¹¶å¸®åŠ©ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œåº”è¯¥å°è¯•ç¼–å†™ä»…å¯¹å•ä¸€ç±»å‹çš„å¯¹è±¡æ‰§è¡Œå±æ€§è®¿é—®çš„å‡½æ•°ã€‚ä¸ä»…å¦‚æ­¤ï¼Œç”Ÿæˆçš„ä»£ç çš„æ€§èƒ½å°†æ˜¯æ¬¡ä¼˜çš„</p>
<h2 id="å†…è”">å†…è”</h2>
<p>ä¸€ç§å•ç‹¬ä¸”é‡è¦çš„ä¼˜åŒ–æ˜¯å†…è”ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™ç§ä¼˜åŒ–ç”¨è¢«è°ƒç”¨å‡½æ•°çš„å®ç°ä»£æ›¿äº†å‡½æ•°è°ƒç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-javascript">function map(fn, list) {
    var newList = [];
    for (var i = 0; i &lt; list.length; i++) {
        newList.push(fn(list[i]));
    }
    
    return newList;
}

function incrementNumbers(list) {
    return map(function(n) { return n + 1; }, list);
}

incrementNumbers([1, 2, 3]); // returns [2, 3, 4]
</code></pre>
<p>å†…è”åï¼Œä»£ç æœ€ç»ˆå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="language-javascript">function incrementNumbers(list) {
    var newList = [];
    var fn = function(n) { return n + 1; };
    for (var i = 0; i &lt; list.length; i++) {
        newList.push(fn(list[i]));
    }
    return newList;
}

incrementNumbers([1, 2, 3]); // returns [2, 3, 4]
</code></pre>
<p>è¿™æ ·åšçš„ä¸€ä¸ªå¥½å¤„æ˜¯åˆ é™¤äº†å‡½æ•°è°ƒç”¨ã€‚æ›´å¤§çš„å¥½å¤„æ˜¯ JavaScript å¼•æ“ç°åœ¨å¯ä»¥æ›´æ·±å…¥åœ°äº†è§£å‡½æ•°çš„å®é™…ä½œç”¨ã€‚åŸºäºè¿™ä¸ªæ–°ç‰ˆæœ¬ï¼ŒJavaScript å¼•æ“å¯èƒ½ä¼šå†³å®šå†æ¬¡æ‰§è¡Œå†…è”ï¼š</p>
<pre><code class="language-javascript">function incrementNumbers(list) {
    var newList = [];
    for (var i = 0; i &lt; list.length; i++) {
        newList.push(list[i] + 1);
    }
	
    return newList;
}

incrementNumbers([1, 2, 3]); // returns [2, 3, 4]
</code></pre>
<p>å¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨å·²è¢«åˆ é™¤ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä¼˜åŒ–å™¨ç°åœ¨å¯èƒ½ä¼šæ¨æµ‹ incrementNumbers åªä¼šä»¥æ•°å­—åˆ—è¡¨ä½œä¸ºå‚æ•°è¢«è°ƒç”¨ã€‚å®ƒè¿˜å¯èƒ½å†³å®šå†…è” incrementNumbers([1, 2, 3]) è°ƒç”¨æœ¬èº«ï¼Œå¹¶å‘ç° list.length ä¸º 3ï¼Œè¿™åˆå¯èƒ½å¯¼è‡´ï¼š</p>
<pre><code class="language-javascript">var list = [1, 2, 3];
var newList = [];
newList.push(list[0] + 1);
newList.push(list[1] + 1);
newList.push(list[2] + 1);
list = newList;
</code></pre>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå†…è”å¯ä»¥å®ç°è·¨å‡½æ•°è¾¹ç•Œæ— æ³•æ‰§è¡Œçš„ä¼˜åŒ–ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¯ä»¥å†…è”çš„å†…å®¹æ˜¯æœ‰é™çš„ã€‚ç”±äºä»£ç é‡å¤ï¼Œå†…è”ä¼šå¯¼è‡´æ›´å¤§çš„å‡½æ•°ï¼Œè¿™éœ€è¦é¢å¤–çš„å†…å­˜ã€‚ JavaScript å¼•æ“å¯¹ä¸€ä¸ªå‡½æ•°åœ¨å®Œå…¨è·³è¿‡å†…è”ä¹‹å‰å¯ä»¥è¾¾åˆ°çš„å¤§å°æœ‰ä¸€ä¸ªé¢„ç®—ã€‚</p>
<p>ä¸€äº›å‡½æ•°è°ƒç”¨ä¹Ÿå¾ˆéš¾å†…è”ã€‚ç‰¹åˆ«æ˜¯å½“ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥æ—¶ã€‚</p>
<p>æ­¤å¤–ï¼Œä½œä¸ºå‚æ•°ä¼ é€’çš„å‡½æ•°å¾ˆéš¾å†…è”ï¼Œé™¤éå®ƒæ€»æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚è™½ç„¶è¿™å¯èƒ½ä¼šè®©æ‚¨è§‰å¾—è¿™æ˜¯ä¸€ä»¶å¥‡æ€ªçš„äº‹æƒ…ï¼Œä½†ç”±äºå†…è”ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚</p>
<h2 id="ç»“è®º">ç»“è®º</h2>
<p>JavaScript å¼•æ“æœ‰è®¸å¤šæé«˜è¿è¡Œæ—¶æ€§èƒ½çš„æŠ€å·§ï¼Œæ¯”è¿™é‡Œä»‹ç»çš„è¦å¤šå¾—å¤šã€‚ä½†æ˜¯ï¼Œæœ¬æ–‡ä¸­æè¿°çš„ä¼˜åŒ–é€‚ç”¨äºå¤§å¤šæ•°æµè§ˆå™¨ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“éªŒè¯å®ƒä»¬æ˜¯å¦è¢«åº”ç”¨ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬å°è¯•æé«˜ <a href="https://en.wikipedia.org/wiki/Elm">Elm</a> çš„è¿è¡Œæ—¶æ€§èƒ½æ—¶ï¼Œæˆ‘ä»¬å°†ä¸»è¦å…³æ³¨è¿™äº›ä¼˜åŒ–ã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a href="https://mrale.ph/blog/2015/01/11/whats-up-with-monomorphism.html">Whatâ€™s up with monomorphism</a><br>
<a href="https://mathiasbynens.be/notes/shapes-ics">Shapes and inline caches</a><br>
<a href="https://mathiasbynens.be/notes/prototypes">Optimizing prototypes</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[7 ä¸ªå¯èƒ½éœ€è¦çš„è‡ªå®šä¹‰ React Hook]]></title>
        <id>https://umeimmense.github.io/post/ke-neng-xu-yao-de-7-ge-zi-ding-yi-react-hook</id>
        <link href="https://umeimmense.github.io/post/ke-neng-xu-yao-de-7-ge-zi-ding-yi-react-hook">
        </link>
        <updated>2021-11-29T14:52:17.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æœ¬æ–‡ä¸»è¦ç¼–åˆ¶äº†ä¸€ä»½æ¸…å•ï¼Œåˆ—å‡ºäº†åœ¨é¡¹ç›®ä¸­å¯èƒ½ä¼šéœ€è¦ç”¨åˆ°çš„çš„ä¸ƒä¸ªHooksã€‚<br>
<img src="https://umeimmense.github.io/post-images/1638197755400.jpeg" alt="" loading="lazy"></p>
<h2 id="1-usetoggle">1. useToggle</h2>
<p>è¿™ä¸ªhookå¾ˆå¸¸è§ï¼Œå®ƒç”¨äºåœ¨ true å’Œ false ä¹‹é—´åˆ‡æ¢å¸ƒå°”å€¼ã€‚å½“æˆ‘ä»¬æƒ³è¦æ˜¾ç¤º/éšè—æ¨¡å¼æˆ–æ‰“å¼€/å…³é—­ä¾§è¾¹èœå•æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚è¿™ä¸ªhookçš„åŸºæœ¬ç‰ˆæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<h3 id="å®ç°v1">å®ç°v1</h3>
<pre><code class="language-jsx">// useToggle.jsx
import { useState, useCallback } from 'react';

const useToggle = (initialValue = false) =&gt; {
  const [state, setState] = useState(initialValue);
  
  const toggle = useCallback(() =&gt; {
    setState((state) =&gt; !state);
  }, []);
  
  return [state, toggle];
};

export default useToggle;
</code></pre>
<h3 id="æ¡ˆä¾‹1">æ¡ˆä¾‹1</h3>
<pre><code class="language-jsx">import useToggle from './useToggle';
const App = () =&gt; {
  const [show, toggleShow] = useToggle();
  return (
    &lt;Modal show={show} onClose={toggleShow}&gt;
      &lt;h1&gt;Hello there&lt;/h1&gt;
    &lt;/Modal&gt;
  );
}
</code></pre>
<p>å½“æˆ‘ä»¬æƒ³è¦æ˜¾ç¤º/éšè—è¡¨ä¸­ä¸€è¡Œçš„æ¨¡å¼æ—¶ï¼Œå¯ä»¥ç¨å¾®ä¿®æ”¹æ­¤hookä»¥ç”¨äºç”¨ä¾‹ã€‚æˆ‘æ·»åŠ äº†ä¸€ä¸ª customToggle æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å€¼è®¾ç½®ä¸ºç»™å®šå€¼ï¼Œè€Œä¸æ˜¯åˆ‡æ¢å…ˆå‰çš„çŠ¶æ€å€¼ã€‚</p>
<h3 id="å®ç°v2">å®ç°v2</h3>
<pre><code class="language-jsx">// useToggle.jsx modified

import { useState, useCallback } from 'react';

const useToggle = (initialValue = false) =&gt; {
  const [state, setState] = useState(initialValue);

  const toggle = useCallback(() =&gt; {
    setState((state) =&gt; !state);
  }, []);

  const customToggle = useCallback((value) =&gt; {
    setState(value);
  }, []);

  return [state, toggle, customToggle];
};

export default useToggle;
</code></pre>
<h3 id="æ¡ˆä¾‹2">æ¡ˆä¾‹2</h3>
<p>å‡è®¾æˆ‘ä»¬åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­æœ‰ä¸€å †è¡Œï¼Œæˆ‘ä»¬æƒ³æä¾›ä¸€ä¸ªåˆ é™¤è¡Œçš„é€‰é¡¹ã€‚å•å‡»åˆ é™¤æŒ‰é’®åº”æ‰“å¼€ä¸€ä¸ªç¡®è®¤æ¨¡å¼ã€‚<br>
å¯¹äºè¿™ç§ç±»å‹çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦çŠ¶æ€ä¸­çš„ä¸¤ä¸ªå˜é‡ã€‚é¦–å…ˆï¼Œä¿å­˜ä¸€ä¸ªå¸ƒå°”å€¼æ¥ç¡®å®šæ˜¯å¦æ˜¾ç¤ºåˆ é™¤ç¡®è®¤æ¨¡å¼ï¼Œå…¶æ¬¡ä¿å­˜å¿…é¡»æ˜¾ç¤ºåˆ é™¤æ¨¡å¼çš„è¡Œ IDã€‚<br>
ä½¿ç”¨è¿™ä¸ªhookï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡æ¥å®Œæˆã€‚è¿™æ˜¯å¦‚ä½•åšåˆ°çš„ï¼š</p>
<pre><code class="language-jsx">import useToggle from './useToggle';

// initial data
const rows = [
  { id: 1, name: 'John' },
  { id: 2, name: 'Doe' }
];

const App = () =&gt; {
  // using hook
  const [delModal, toggleDelModal, setDelModalCustom] = useToggle();

  return (
    &lt;div&gt;
      &lt;table&gt;
        {rows.map(row =&gt; (
          &lt;tr&gt;
            &lt;td&gt;{row.id}&lt;/td&gt;
            &lt;td&gt;{row.name}&lt;/td&gt;
            &lt;td onClick={() =&gt; setDelModalCustom(row.id)}&gt;Delete&lt;/td&gt;
          &lt;/tr&gt;
        ))}
      &lt;/table&gt;

      &lt;DeleteModal
        show={Boolean(delModal)}
        onClose={toggleDelModal}
        itemToDelete={delModal} // it will hold the current row id
      &gt;
        &lt;h1&gt;
          Are you sure you want to delete row with id {delModal}
        &lt;/h1&gt;
      &lt;/DeleteModal&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="2-usepagebottom">2. usePageBottom</h2>
<p>ä½¿ç”¨æ­¤hookï¼Œæ‚¨å¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦å·²æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ã€‚éå¸¸é€‚åˆæ— é™æ»šåŠ¨çš„åº”ç”¨ç¨‹åºï¼Œå½“ç”¨æˆ·æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨æ—¶ï¼Œæ‚¨éœ€è¦è·å–æ›´å¤šæ•°æ®ã€‚</p>
<pre><code class="language-jsx">// usePageBottom.jsx

import { useState, useEffect } from 'react';

const usePageBottom = () =&gt; {
  const [reachedBottom, setReachedBottom] = useState(false);
  
  // event handler for determining if the user reached bottom
  const handleScroll = () =&gt; {
    const offsetHeight = document.documentElement.offsetHeight;
    const innerHeight = window.innerHeight;
    const scrollTop = document.documentElement.scrollTop;

    // if current scroll from bottom is less than equal to 10px
    const reachingBottom = offsetHeight - (innerHeight + scrollTop) &lt;= 10;

    setReachedBottom(reachingBottom);
  };

  // effect for binding event listener on window scroll
  useEffect(() =&gt; {
    window.addEventListener('scroll', handleScroll);
    
    return () =&gt; {
      window.removeEventListener('scroll', handleScroll);
    };
  }, [handleScroll]);
  
  return reachedBottom;
}
</code></pre>
<h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h3>
<pre><code class="language-jsx">import usePageBottom from './usePageBottom';
const App = (props) =&gt; {
  // hook usage
  const scrolledBottom = usePageBottom();
  return (
    &lt;div className=&quot;App&quot; style={{ height: '150vh' }}&gt;
      &lt;h1&gt;This is app&lt;/h1&gt;
      &lt;p&gt;Scrolled to bottom {scrolledBottom}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3 id="èŠ‚æµç‰ˆæœ¬å¯é€‰">èŠ‚æµç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰</h3>
<p>å‡å°‘åƒçª—å£æ»šåŠ¨äº‹ä»¶è¿™æ ·å¤šæ¬¡è§¦å‘çš„äº‹ä»¶çš„é€šçŸ¥æ˜¯æœ€ä½³å®è·µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŠ‚æµè®¾ç½®äº‹ä»¶ä¾¦å¬å™¨ã€‚æˆ‘æ­£åœ¨ä½¿ç”¨ <code>lodash</code> çš„<code>throttle</code>ï¼›ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å»<code>debounce</code>ã€‚</p>
<pre><code class="language-jsx">// usePageBottom with throttle

import { useState, useEffect, useMemo } from 'react';
import { throttle } from 'lodash';

const usePageBottom = () =&gt; {
  const [reachedBottom, setReachedBottom] = useState(false);
  
  // event handler for determining if the user reached bottom
 const handleScroll = useMemo(() =&gt; {
    return throttle(() =&gt; {
      const offsetHeight = document.documentElement.offsetHeight;
      const innerHeight = window.innerHeight;
      const scrollTop = document.documentElement.scrollTop;

      // if current scroll from bottom is less than equal to 10px
      const reachingBottom = offsetHeight - (innerHeight + scrollTop) &lt;= 10;
      
      setReachedBottom(reachingBottom);
    }, 1000);
  }, []);

  // effect for binding event listener on window scroll
  useEffect(() =&gt; {
    window.addEventListener('scroll', handleScroll);
    
    return () =&gt; {
      window.removeEventListener('scroll', handleScroll);
    };
  }, [handleScroll]);
  
  return reachedBottom;
}
</code></pre>
<h2 id="3-useelementbottom">3. useElementBottom</h2>
<p>å°±åƒé¡µé¢åº•éƒ¨ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦å·²ç»æ»šåŠ¨åˆ°å…ƒç´ çš„åº•éƒ¨ã€‚åœ¨è¿™ä¸ªhookä¸­ï¼Œä¼ é€’äº†å¯¹å…ƒç´ çš„å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…ƒç´ çš„é«˜åº¦å’Œå½“å‰æ»šåŠ¨ä½ç½®æ¥ç¡®å®šå…ƒç´ æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨ã€‚</p>
<pre><code class="language-jsx">// useElementBottom.jsx

import { useState, useEffect, useMemo } from 'react';
import { throttle } from 'lodash';

const useElementBottom = (element) =&gt; {
  const [reachedBottom, setReachedBottom] = useState(false);

  // event handler for determining if the user reached bottom
  const handleScroll = useMemo(() =&gt; {
    return throttle(() =&gt; {
      const { current } = element; // current holds the reference to element

      // if current scroll from bottom is less than equal to 10px
      const scrollBottom =
        current.scrollHeight - current.scrollTop - current.clientHeight;

      const reachingBottom = scrollBottom &lt;= 10;
      setReachedBottom(reachingBottom);
    }, 1000);
  }, []);

  // effect for binding event listener on element scroll
  useEffect(() =&gt; {
    const { current } = element;
    current.addEventListener('scroll', handleScroll);

    return () =&gt; current.removeEventListener('scroll', handleScroll);
  }, []);

  return reachedBottom;
};

export default useElementBottom;
</code></pre>
<h3 id="æ¡ˆä¾‹-2">æ¡ˆä¾‹</h3>
<pre><code class="language-jsx">import useElementBottom from './useElementBottom';
const App = (props) =&gt; {
  const element = useRef();
  // hook usage
  const scrolledBottom = useElementBottom(element);
  return (
    &lt;div ref={element} style={{ height: '150vh' }}&gt;
      &lt;h1&gt;This is app&lt;/h1&gt;
      &lt;p&gt;Scrolled to bottom {scrolledBottom}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="4-useprevious">4. usePrevious</h2>
<p>æˆ‘ä»¬å¯ä»¥åˆ¶ä½œä¸€ä¸ªè‡ªå®šä¹‰hookæ¥è·å– prop æˆ– state çš„å…ˆå‰å€¼ã€‚ä½¿ç”¨ React ç±»ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ componentDidUpdate ç”Ÿå‘½å‘¨æœŸæ¥è·å–ä¹‹å‰çš„ prop å’Œ state å€¼ã€‚å¯¹äºåŠŸèƒ½ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰hookæ¥å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-jsx">// usePrevious.jsx

import { useEffect, useRef } from 'react';

const usePrevious = (value) =&gt; {
  const ref = useRef();

  // store current value in ref
  useEffect(() =&gt; {
    ref.current = value;
  }, [value]);

  // return previous value (happens before update in useEffect above)
  return ref.current;
};

export default usePrevious;
</code></pre>
<p>æˆ‘ä»¬ä½¿ç”¨ useRef hookæ¥å­˜å‚¨å…ˆå‰çš„å€¼ã€‚æˆ‘ä»¬çš„hookåœ¨ useEffect ä¸­æ›´æ–°å¼•ç”¨å¯¹è±¡ä¹‹å‰è¿”å›å…ˆå‰çš„å€¼ã€‚</p>
<pre><code class="language-jsx">import usePrevious from './usePrevious';

const App = () =&gt; {
  const [count, setCount] = useState(0);
  const prevCount = usePrevious(count);
  
  return (
    &lt;div&gt;
      &lt;h1&gt;Now: {count}, before: {prevCount}&lt;/h1&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="5-usewindowsize">5. useWindowSize</h2>
<p>è¿™ä¸ªhookè¿”å›çª—å£çš„å®½åº¦å’Œé«˜åº¦ã€‚æˆ‘ä»¬åœ¨è°ƒæ•´çª—å£å¤§å°æ—¶è®¾ç½®äº†ä¸€ä¸ªå—é™åˆ¶çš„ set äº‹ä»¶ä¾¦å¬å™¨ï¼Œä»¥ä¾¿æˆ‘ä»¬æ¯æ¬¡éƒ½èƒ½è·å¾—æ­£ç¡®çš„å®½åº¦å’Œé«˜åº¦ã€‚</p>
<pre><code class="language-jsx">// useWindowSize

import { useState, useEffect, useCallback } from 'react';
import { throttle } from 'throttle';

const useWindowSize = () =&gt; {
  const [size, setSize] = useState({
    innerWidth: window.innerWidth,
    innerHeight: window.innerHeight,
  });

  // throttled set listener that runs on window resize
  const throttledSetResizeListner = useCallback(
    throttle(() =&gt; {
      // set size in state
      setSize({
        innerWidth: window.innerWidth,
        innerHeight: window.innerHeight,
      });
    }, 1000),
    []
  );

  // effect for binding resize event on window
  useEffect(() =&gt; {
    // add throtelled set window resize event listener
    window.addEventListener('resize', throttledSetResizeListner);

    // remove throttled set window resize event listener
    return () =&gt;
      window.removeEventListener('resize', throttledSetResizeListner);
  }, [throttledSetResizeListner]);

  return size;
};

export default useWindowSize;
</code></pre>
<h3 id="æ¡ˆä¾‹-3">æ¡ˆä¾‹</h3>
<p>å½“ä½ æƒ³æ ¹æ®çª—å£çš„å®½åº¦æˆ–é«˜åº¦åœ¨ä½ çš„ JS ä»£ç ä¸­åšä¸€äº›äº‹æƒ…æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚</p>
<pre><code class="language-jsx">import useWindowSize from './useWindowSize';
const App = () =&gt; {
  const { innerWidth, innerHeight } = useWindowSize();
  return (
    &lt;div&gt;
      {innerWidth &lt;= 768 ?
        'I am on small screen' : 'I am on large screen'}
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="6-useeventlistener">6. useEventListener</h2>
<p>ä½¿ç”¨æ­¤hookå¯ä»¥è½»æ¾åœ°å°†äº‹ä»¶ä¾¦å¬å™¨ç»‘å®šåˆ°çª—å£æˆ–çª—å£å…ƒç´ ã€‚åœ¨hookçš„effectä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥å…ƒç´ æ˜¯å¦æ˜¯æ¥è‡ª useRef çš„å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å°†äº‹ä»¶ä¾¦å¬å™¨æ·»åŠ åˆ°å…¨å±€çª—å£å¯¹è±¡ã€‚</p>
<pre><code class="language-jsx">import { useEffect } from 'react';

const useEventListener = (event, handler, referencedElement) =&gt; {
  // effect for binding event handler to the element
  useEffect(() =&gt; {
    const element = referencedElement?.current || window;

    const isSupported = element &amp;&amp; element.addEventListener;

    if (!isSupported) return;

    // bind event to the element
    element.addEventListener(event, handler);

    return () =&gt; element.removeEventListener(event, handler);
  }, [referencedElement, event, handler]);

  return;
};

export default useEventListener;
</code></pre>
<pre><code class="language-jsx">import useEventListener from './useEventListener';

const App = (props) =&gt; {
  const element = useRef();
  useEventListener('mouseover', handler, element);
  const handler =&gt; () =&gt; {
    console.log('Event triggered');
  }
  return (
    &lt;div ref={element}&gt;
      &lt;h1&gt;This is app&lt;/h1&gt;
    &lt;div&gt;
  );
}
</code></pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„hookå°†äº‹ä»¶æ·»åŠ åˆ°çª—å£</p>
<pre><code class="language-jsx">import useEventListener from './useEventListener';
const App = (props) =&gt; {
  // adding event listener on window scroll
  useEventListener('scroll', handler);
  const handler =&gt; () =&gt; {
    console.log('Event triggered');
  }
  return (
    &lt;div&gt;
      &lt;h1&gt;This is app&lt;/h1&gt;
    &lt;div&gt;
  );
}
</code></pre>
<h2 id="7-uselocalstoragestate">7. useLocalStorageState</h2>
<p>æœ‰æ—¶ï¼Œå¯èƒ½éœ€è¦åœ¨æœ¬åœ°å­˜å‚¨å’ŒçŠ¶æ€ä¹‹é—´åŒæ­¥ä¸€ä¸ªå€¼ã€‚è¿™ä¸ªhookçš„ä½œç”¨å®Œå…¨ä¸€æ ·ã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ useState å¹¶æ£€æŸ¥æŒ‡å®šçš„é”®æ˜¯å¦åœ¨æœ¬åœ°å­˜å‚¨ä¸­å…·æœ‰æŸä¸ªå€¼ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨ä½œåˆå§‹å€¼ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨é¡µé¢åˆ·æ–°æ—¶ä¿æŒå€¼ä¸çŠ¶æ€åŒæ­¥ã€‚</p>
<pre><code class="language-jsx">// useLocalStorageState

import { useState, useEffect } from 'react';

const useLocalStorageState = (key, defaultValue) =&gt; {
  const [value, setValue] = useState(() =&gt; {
    let val;

    try {
      // if there is a value in local storage for given key, set it as initial state
      val = JSON.parse(localStorage.getItem(key) || String(defaultValue));
    } catch (error) {
      // otherwise, set default value as initial state
      val = defaultValue;
    }

    return val;
  });

  // effect to update local storage when state changes
  useEffect(() =&gt; {
    localStorage.setItem(key, JSON.stringify(value));
  }, [value]);

  return [value, setValue];
};

export default useLocalStorageState;
</code></pre>
<p>å½“å€¼æ›´æ–°æ—¶ï¼Œä¼šè¿è¡Œä¸€ä¸ªeffect ï¼Œæ›´æ–°æœ¬åœ°å­˜å‚¨ä¸­çš„å€¼ã€‚</p>
<h3 id="æ¡ˆä¾‹-4">æ¡ˆä¾‹</h3>
<p>å‡è®¾ä½ æƒ³åœ¨æœ¬åœ°å­˜å‚¨ä¸­å­˜å‚¨ç”¨æˆ·ä¸»é¢˜é¦–é€‰é¡¹</p>
<pre><code class="language-jsx">import useLocalStorageState from './useLocalStorageState';
const App = (props) =&gt; {
  // setting default theme to light
  const [theme, setTheme] = useLocalStorageState('theme', 'light');
  return (
    &lt;div&gt;
      &lt;p&gt;Current theme is {theme}&lt;/p&gt;
      &lt;button onClick={() =&gt; setTheme('dark')}&gt;
        Change theme to dark
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>å½“ä½ ç‚¹å‡»æ›´æ”¹ä¸»é¢˜æŒ‰é’®æ—¶ï¼ŒçŠ¶æ€å’Œæœ¬åœ°å­˜å‚¨ä¸­çš„å€¼éƒ½ä¼šæ›´æ–°ã€‚é¡µé¢åˆ·æ–°åï¼Œä½ å°†è·å¾—å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨ä¸­çš„æœ€åä¸€ä¸ªå€¼ã€‚</p>
<h2 id="ç»“è¯­">ç»“è¯­</h2>
<p>æ„Ÿè°¢ä½ é˜…è¯»åˆ°æœ€åã€‚æˆ‘å¸Œæœ›è¿™äº›è‡ªå®šä¹‰hookå¯¹ä½ æœ‰ç”¨ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[10ä¸ªå¸¸ç”¨çš„JavaScriptä½¿ç”¨æŠ€å·§]]></title>
        <id>https://umeimmense.github.io/post/shi-ge-chang-yong-de-javascript-shi-yong-ji-qiao</id>
        <link href="https://umeimmense.github.io/post/shi-ge-chang-yong-de-javascript-shi-yong-ji-qiao">
        </link>
        <updated>2021-11-23T07:48:55.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ç¼–å†™ç®€çŸ­ã€ç®€æ´å’Œå¹²å‡€çš„ JavaScript ä»£ç çš„æŠ€å·§ğŸ˜<br>
<img src="https://umeimmense.github.io/post-images/1638169801723.png" alt="" loading="lazy"><br>
JavaScript æœ‰å¾ˆå¤šå¾ˆé…·çš„ç‰¹æ€§ï¼Œå¤§å¤šæ•°åˆå­¦è€…å’Œä¸­çº§å¼€å‘äººå‘˜éƒ½ä¸çŸ¥é“ã€‚æˆ‘æŒ‘é€‰äº† 10 ä¸ªæˆ‘åœ¨æ—¥å¸¸ JavaScript é¡¹ç›®ä¸­ä½¿ç”¨çš„æŠ€å·§ã€‚</p>
<h2 id="1-æœ‰æ¡ä»¶çš„å‘å¯¹è±¡ä¸­æ·»åŠ å±æ€§">1. æœ‰æ¡ä»¶çš„å‘å¯¹è±¡ä¸­æ·»åŠ å±æ€§</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ <code>...</code> æ¥æœ‰æ¡ä»¶åœ°å‘ JavaScript å¯¹è±¡å¿«é€Ÿæ·»åŠ å±æ€§ã€‚</p>
<pre><code class="language-javascript">const condition = true;
const person = {
  id: 1,
  name: 'John Doe',
  ...(condition &amp;&amp; { age: 16 }),
};
</code></pre>
<p>å¦‚æœæ¯ä¸ªæ“ä½œæ•°çš„è®¡ç®—ç»“æœéƒ½ä¸ºtrueï¼Œ &amp;&amp; è¿ç®—ç¬¦å°†è¿”å›æœ€åè®¡ç®—çš„è¡¨è¾¾å¼ã€‚å› æ­¤è¿”å›ä¸€ä¸ªå¯¹è±¡ { age: 16 }ï¼Œç„¶åå°†å…¶ä½œä¸º person å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å¦‚æœæ¡ä»¶ä¸º falseï¼Œåˆ™ JavaScript å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<pre><code class="language-javascript">const person = {
  id: 1,
  name: 'John Doe',
  ...(false), // evaluates to false
};
// spreading false has no effect on the object
console.log(person); // { id: 1, name: 'John Doe' }
</code></pre>
<h2 id="2-æ£€æŸ¥ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªå¯¹è±¡ä¸­">2. æ£€æŸ¥ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªå¯¹è±¡ä¸­</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>in</code>å…³é”®å­—æ¥æ£€æŸ¥ JavaScript å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨å±æ€§</p>
<pre><code class="language-javascript">const person = { name: 'John Doe', salary: 1000 };
console.log('salary' in person); // returns true
console.log('age' in person); // returns false
</code></pre>
<h2 id="3-å¯¹è±¡ä¸­çš„åŠ¨æ€å±æ€§åç§°">3. å¯¹è±¡ä¸­çš„åŠ¨æ€å±æ€§åç§°</h2>
<p>ä½¿ç”¨åŠ¨æ€é”®è®¾ç½®å¯¹è±¡å±æ€§å¾ˆç®€å•ã€‚åªéœ€ä½¿ç”¨ ['key_name'] ç¬¦å·æ·»åŠ å±æ€§</p>
<pre><code class="language-javascript">const dynamic = 'flavour';
var item = {
  name: 'Biscuit',
  [dynamic]: 'Chocolate'
}
console.log(item); // { name: 'Biscuit', flavour: 'Chocolate' }
</code></pre>
<p>åŒæ ·çš„æŠ€å·§ä¹Ÿå¯ç”¨äºä½¿ç”¨åŠ¨æ€é”®å¼•ç”¨å¯¹è±¡å±æ€§ï¼š</p>
<pre><code class="language-javascript">const keyName = 'name';
console.log(item[keyName]); // returns 'Biscuit'
</code></pre>
<h2 id="4-ä½¿ç”¨åŠ¨æ€é”®è¿›è¡Œå¯¹è±¡è§£æ„">4. ä½¿ç”¨åŠ¨æ€é”®è¿›è¡Œå¯¹è±¡è§£æ„</h2>
<p>ä½ å¯èƒ½çŸ¥é“ä½ å¯ä»¥è§£æ„ä¸€ä¸ªå˜é‡å¹¶ç«‹å³ç”¨ : ç¬¦å·é‡å‘½åå®ƒã€‚ä½†æ˜¯ä½ çŸ¥é“å½“ä½ ä¸çŸ¥é“é”®åæˆ–é”®åæ˜¯åŠ¨æ€çš„æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥è§£æ„å¯¹è±¡çš„å±æ€§å—ï¼Ÿ<br>
é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨è§£æ„ï¼ˆç”¨åˆ«åè§£æ„ï¼‰æ—¶é‡å‘½åå˜é‡ã€‚</p>
<pre><code class="language-javascript">const person = { id: 1, name: 'John Doe' };
const { name: personName } = person;
console.log(personName); // returns 'John Doe'
</code></pre>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€é”®æ¥è§£æ„å±æ€§ï¼š</p>
<pre><code class="language-javascript">const templates = {
  'hello': 'Hello there',
  'bye': 'Good bye'
};
const templateName = 'bye';
const { [templateName]: template } = templates;
console.log(template) // returns 'Good bye'
</code></pre>
<h2 id="5-è¿ç®—ç¬¦">5. ?? è¿ç®—ç¬¦</h2>
<p>è¿™ <code>??</code>å½“ä½ è¦æ£€æŸ¥å˜é‡æ˜¯ null è¿˜æ˜¯ undefined æ—¶ï¼Œè¿ç®—ç¬¦å¾ˆæœ‰ç”¨ã€‚å½“å…¶å·¦ä¾§æ“ä½œæ•°ä¸ºç©ºæˆ–æœªå®šä¹‰æ—¶ï¼Œå®ƒè¿”å›å³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å…¶å·¦ä¾§æ“ä½œæ•°ã€‚</p>
<pre><code class="language-javascript">const foo = null ?? 'Hello';
console.log(foo); // returns 'Hello'
const bar = 'Not null' ?? 'Hello';
console.log(bar); // returns 'Not null'
const baz = 0 ?? 'Hello';
console.log(baz); // returns 0
</code></pre>
<p>åœ¨ç¬¬ä¸‰ä¸ªç¤ºä¾‹ä¸­ï¼Œè¿”å› 0 æ˜¯å› ä¸ºå³ä½¿ 0 åœ¨ JavaScript ä¸­è¢«è®¤ä¸ºæ˜¯å‡çš„ï¼Œä½†å®ƒä¸æ˜¯ null æˆ–æœªå®šä¹‰çš„ã€‚ä½ å¯èƒ½è®¤ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ||è¿ç®—ç¬¦åœ¨è¿™é‡Œï¼Œä½†è¿™ä¸¤è€…ä¹‹é—´å­˜åœ¨å·®å¼‚ï¼š</p>
<pre><code class="language-javascript">const cannotBeZero = 0 || 5;
console.log(cannotBeZero); // returns 5
const canBeZero = 0 ?? 5;
console.log(canBeZero); // returns 0
</code></pre>
<h2 id="6-å¯é€‰é“¾">6. ?. å¯é€‰é“¾</h2>
<p>æˆ‘ä»¬éƒ½å¯èƒ½æ›¾ç»é‡åˆ°è¿‡TypeErrorï¼šæ— æ³•è¯»å– null çš„å±æ€§â€œfooâ€ä¹‹ç±»çš„é”™è¯¯ã€‚è¿™å¯¹æ¯ä¸ª JavaSript å¼€å‘äººå‘˜æ¥è¯´éƒ½æ˜¯å¤´ç–¼çš„é—®é¢˜ã€‚å¼•å…¥äº†å¯é€‰é“¾å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼š</p>
<pre><code class="language-javascript">const book = { id:1, title: 'Title', author: null };
// normally, you would do this
console.log(book.author.age) // throws error
console.log(book.author &amp;&amp; book.author.age); // returns null (no error)
// with optional chaining
console.log(book.author?.age); // returns undefined
// or deep optional chaining
console.log(book.author?.address?.city); // returns undefined
</code></pre>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨å…·æœ‰ä»¥ä¸‹åŠŸèƒ½çš„å¯é€‰é“¾ï¼š</p>
<pre><code class="language-javascript">const person = {
  firstName: 'Haseeb',
  lastName: 'Anwar',
  printName: function () {
    return `${this.firstName} ${this.lastName}`;
  },
};
console.log(person.printName()); // returns 'Haseeb Anwar'
console.log(persone.doesNotExist?.()); // returns undefined
</code></pre>
<h2 id="7-ä½¿ç”¨-çš„å¸ƒå°”è½¬æ¢ç¬¦">7. ä½¿ç”¨ !! çš„å¸ƒå°”è½¬æ¢ç¬¦</h2>
<p>è¿™ <code>!!</code>è¿ç®—ç¬¦å¯ç”¨äºå°†è¡¨è¾¾å¼çš„ç»“æœå¿«é€Ÿè½¬æ¢ä¸ºå¸ƒå°”å€¼ <code>true</code> æˆ– <code>false</code>ã€‚å°±æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="language-javascript">const greeting = 'Hello there!';
console.log(!!greeting) // returns true
const noGreeting = '';
console.log(!!noGreeting); // returns false
</code></pre>
<h2 id="8-å­—ç¬¦ä¸²å’Œæ•´æ•°è½¬æ¢">8. å­—ç¬¦ä¸²å’Œæ•´æ•°è½¬æ¢</h2>
<p>ä½¿ç”¨ + è¿ç®—ç¬¦å¿«é€Ÿå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-javascript">const stringNumer = '123';
console.log(+stringNumer); // returns integer 123
console.log(typeof +stringNumer); // returns 'number'
</code></pre>
<p>è¦å°†æ•°å­—å¿«é€Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨ + è¿ç®—ç¬¦åè·Ÿç©ºå­—ç¬¦ä¸² &quot;&quot;ï¼š</p>
<pre><code class="language-javascript">const myString = 25 + '';
console.log(myString); // returns '25'
console.log(typeof myString); // returns 'string'
</code></pre>
<p>è¿™äº›ç±»å‹è½¬æ¢éå¸¸æ–¹ä¾¿ï¼Œä½†å®ƒä»¬çš„æ¸…æ™°åº¦å’Œä»£ç å¯è¯»æ€§è¾ƒå·®ã€‚å› æ­¤ï¼Œåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä¸€ä¸‹ã€‚ä¸è¿‡å¯ä»¥ç”¨æ‰<code>code golf</code>ä¸­ã€‚</p>
<h2 id="9-æ£€æŸ¥æ•°ç»„ä¸­çš„å‡å€¼">9. æ£€æŸ¥æ•°ç»„ä¸­çš„å‡å€¼</h2>
<p>ä½ ç†Ÿæ‚‰ filterã€some å’Œ every æ•°ç»„æ–¹æ³•ã€‚ä½†ä½ ä¹Ÿåº”è¯¥çŸ¥é“ï¼Œä½ å¯ä»¥ä»…ä½¿ç”¨å¸ƒå°”æ–¹æ³•æ¥æµ‹è¯•çœŸå€¼ï¼š</p>
<pre><code class="language-javascript">const myArray = [null, false, 'Hello', undefined, 0];
// filter falsy values
const filtered = myArray.filter(Boolean);
console.log(filtered); // returns ['Hello']
// check if at least one value is truthy
const anyTruthy = myArray.some(Boolean);
console.log(anyTruthy); // returns true
// check if all values are truthy
const allTruthy = myArray.every(Boolean);
console.log(allTruthy); // returns false
</code></pre>
<p>è¿™æ˜¯å®ƒçš„å·¥ä½œåŸç†ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™äº›æ•°ç»„æ–¹æ³•é‡‡ç”¨å›è°ƒå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å°†å¸ƒå°”å€¼ä½œä¸ºå›è°ƒå‡½æ•°ä¼ é€’ã€‚ <code>Boolean</code> æœ¬èº«æ¥å—ä¸€ä¸ªå‚æ•°å¹¶æ ¹æ®å‚æ•°çš„çœŸå®æ€§è¿”å›<code>true</code>æˆ– <code>false</code>ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è¯´ï¼š</p>
<pre><code class="language-javascript">myArray.filter(val =&gt; Boolean(val));
</code></pre>
<p>æ˜¯ä¸æ˜¯å’Œè¿™ä¸ªä¸€æ ·ï¼š</p>
<pre><code class="language-javascript">myArray.filter(Boolean);
</code></pre>
<h2 id="10å±•å¹³æ•°ç»„">10.å±•å¹³æ•°ç»„</h2>
<p>åŸå‹ Array ä¸Šæœ‰ä¸€ä¸ªæ–¹æ³• flat å¯ä»¥è®©ä½ ä»æ•°ç»„çš„æ•°ç»„ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼š</p>
<pre><code class="language-javascript">const myArray = [{ id: 1 }, [{ id: 2 }], [{ id: 3 }]];
const flattedArray = myArray.flat(); 
// returns [ { id: 1 }, { id: 2 }, { id: 3 } 
</code></pre>
<p>ä½ è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªæ·±åº¦çº§åˆ«ï¼ŒæŒ‡å®šåµŒå¥—æ•°ç»„ç»“æ„åº”å±•å¹³çš„æ·±åº¦ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-javascirpt">const arr = [0, 1, 2, [[[3, 4]]]];
console.log(arr.flat(2)); // returns [0, 1, 2, [3,4]]
</code></pre>
<h2 id="ç»“è¯­">ç»“è¯­</h2>
<p>æ„Ÿè°¢ä½ é˜…è¯»åˆ°æœ€åã€‚æˆ‘å¸Œæœ›è¿™äº›æŠ€å·§å¯¹ä½ æœ‰ç”¨ã€‚</p>
]]></content>
    </entry>
</feed>