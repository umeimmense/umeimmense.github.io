{"posts":[{"title":"7 ä¸ªå¯èƒ½éœ€è¦çš„è‡ªå®šä¹‰ React Hook","content":"å‰è¨€ æœ¬æ–‡ä¸»è¦ç¼–åˆ¶äº†ä¸€ä»½æ¸…å•ï¼Œåˆ—å‡ºäº†åœ¨é¡¹ç›®ä¸­å¯èƒ½ä¼šéœ€è¦ç”¨åˆ°çš„çš„ä¸ƒä¸ªHooksã€‚ 1. useToggle è¿™ä¸ªhookå¾ˆå¸¸è§ï¼Œå®ƒç”¨äºåœ¨ true å’Œ false ä¹‹é—´åˆ‡æ¢å¸ƒå°”å€¼ã€‚å½“æˆ‘ä»¬æƒ³è¦æ˜¾ç¤º/éšè—æ¨¡å¼æˆ–æ‰“å¼€/å…³é—­ä¾§è¾¹èœå•æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚è¿™ä¸ªhookçš„åŸºæœ¬ç‰ˆæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š å®ç°v1 // useToggle.jsx import { useState, useCallback } from 'react'; const useToggle = (initialValue = false) =&gt; { const [state, setState] = useState(initialValue); const toggle = useCallback(() =&gt; { setState((state) =&gt; !state); }, []); return [state, toggle]; }; export default useToggle; æ¡ˆä¾‹1 import useToggle from './useToggle'; const App = () =&gt; { const [show, toggleShow] = useToggle(); return ( &lt;Modal show={show} onClose={toggleShow}&gt; &lt;h1&gt;Hello there&lt;/h1&gt; &lt;/Modal&gt; ); } å½“æˆ‘ä»¬æƒ³è¦æ˜¾ç¤º/éšè—è¡¨ä¸­ä¸€è¡Œçš„æ¨¡å¼æ—¶ï¼Œå¯ä»¥ç¨å¾®ä¿®æ”¹æ­¤hookä»¥ç”¨äºç”¨ä¾‹ã€‚æˆ‘æ·»åŠ äº†ä¸€ä¸ª customToggle æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å€¼è®¾ç½®ä¸ºç»™å®šå€¼ï¼Œè€Œä¸æ˜¯åˆ‡æ¢å…ˆå‰çš„çŠ¶æ€å€¼ã€‚ å®ç°v2 // useToggle.jsx modified import { useState, useCallback } from 'react'; const useToggle = (initialValue = false) =&gt; { const [state, setState] = useState(initialValue); const toggle = useCallback(() =&gt; { setState((state) =&gt; !state); }, []); const customToggle = useCallback((value) =&gt; { setState(value); }, []); return [state, toggle, customToggle]; }; export default useToggle; æ¡ˆä¾‹2 å‡è®¾æˆ‘ä»¬åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­æœ‰ä¸€å †è¡Œï¼Œæˆ‘ä»¬æƒ³æä¾›ä¸€ä¸ªåˆ é™¤è¡Œçš„é€‰é¡¹ã€‚å•å‡»åˆ é™¤æŒ‰é’®åº”æ‰“å¼€ä¸€ä¸ªç¡®è®¤æ¨¡å¼ã€‚ å¯¹äºè¿™ç§ç±»å‹çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦çŠ¶æ€ä¸­çš„ä¸¤ä¸ªå˜é‡ã€‚é¦–å…ˆï¼Œä¿å­˜ä¸€ä¸ªå¸ƒå°”å€¼æ¥ç¡®å®šæ˜¯å¦æ˜¾ç¤ºåˆ é™¤ç¡®è®¤æ¨¡å¼ï¼Œå…¶æ¬¡ä¿å­˜å¿…é¡»æ˜¾ç¤ºåˆ é™¤æ¨¡å¼çš„è¡Œ IDã€‚ ä½¿ç”¨è¿™ä¸ªhookï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡æ¥å®Œæˆã€‚è¿™æ˜¯å¦‚ä½•åšåˆ°çš„ï¼š import useToggle from './useToggle'; // initial data const rows = [ { id: 1, name: 'John' }, { id: 2, name: 'Doe' } ]; const App = () =&gt; { // using hook const [delModal, toggleDelModal, setDelModalCustom] = useToggle(); return ( &lt;div&gt; &lt;table&gt; {rows.map(row =&gt; ( &lt;tr&gt; &lt;td&gt;{row.id}&lt;/td&gt; &lt;td&gt;{row.name}&lt;/td&gt; &lt;td onClick={() =&gt; setDelModalCustom(row.id)}&gt;Delete&lt;/td&gt; &lt;/tr&gt; ))} &lt;/table&gt; &lt;DeleteModal show={Boolean(delModal)} onClose={toggleDelModal} itemToDelete={delModal} // it will hold the current row id &gt; &lt;h1&gt; Are you sure you want to delete row with id {delModal} &lt;/h1&gt; &lt;/DeleteModal&gt; &lt;/div&gt; ); } 2. usePageBottom ä½¿ç”¨æ­¤hookï¼Œæ‚¨å¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦å·²æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ã€‚éå¸¸é€‚åˆæ— é™æ»šåŠ¨çš„åº”ç”¨ç¨‹åºï¼Œå½“ç”¨æˆ·æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨æ—¶ï¼Œæ‚¨éœ€è¦è·å–æ›´å¤šæ•°æ®ã€‚ // usePageBottom.jsx import { useState, useEffect } from 'react'; const usePageBottom = () =&gt; { const [reachedBottom, setReachedBottom] = useState(false); // event handler for determining if the user reached bottom const handleScroll = () =&gt; { const offsetHeight = document.documentElement.offsetHeight; const innerHeight = window.innerHeight; const scrollTop = document.documentElement.scrollTop; // if current scroll from bottom is less than equal to 10px const reachingBottom = offsetHeight - (innerHeight + scrollTop) &lt;= 10; setReachedBottom(reachingBottom); }; // effect for binding event listener on window scroll useEffect(() =&gt; { window.addEventListener('scroll', handleScroll); return () =&gt; { window.removeEventListener('scroll', handleScroll); }; }, [handleScroll]); return reachedBottom; } æ¡ˆä¾‹ import usePageBottom from './usePageBottom'; const App = (props) =&gt; { // hook usage const scrolledBottom = usePageBottom(); return ( &lt;div className=&quot;App&quot; style={{ height: '150vh' }}&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;p&gt;Scrolled to bottom {scrolledBottom}&lt;/p&gt; &lt;/div&gt; ); } èŠ‚æµç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰ å‡å°‘åƒçª—å£æ»šåŠ¨äº‹ä»¶è¿™æ ·å¤šæ¬¡è§¦å‘çš„äº‹ä»¶çš„é€šçŸ¥æ˜¯æœ€ä½³å®è·µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŠ‚æµè®¾ç½®äº‹ä»¶ä¾¦å¬å™¨ã€‚æˆ‘æ­£åœ¨ä½¿ç”¨ lodash çš„throttleï¼›ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å»debounceã€‚ // usePageBottom with throttle import { useState, useEffect, useMemo } from 'react'; import { throttle } from 'lodash'; const usePageBottom = () =&gt; { const [reachedBottom, setReachedBottom] = useState(false); // event handler for determining if the user reached bottom const handleScroll = useMemo(() =&gt; { return throttle(() =&gt; { const offsetHeight = document.documentElement.offsetHeight; const innerHeight = window.innerHeight; const scrollTop = document.documentElement.scrollTop; // if current scroll from bottom is less than equal to 10px const reachingBottom = offsetHeight - (innerHeight + scrollTop) &lt;= 10; setReachedBottom(reachingBottom); }, 1000); }, []); // effect for binding event listener on window scroll useEffect(() =&gt; { window.addEventListener('scroll', handleScroll); return () =&gt; { window.removeEventListener('scroll', handleScroll); }; }, [handleScroll]); return reachedBottom; } 3. useElementBottom å°±åƒé¡µé¢åº•éƒ¨ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦å·²ç»æ»šåŠ¨åˆ°å…ƒç´ çš„åº•éƒ¨ã€‚åœ¨è¿™ä¸ªhookä¸­ï¼Œä¼ é€’äº†å¯¹å…ƒç´ çš„å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…ƒç´ çš„é«˜åº¦å’Œå½“å‰æ»šåŠ¨ä½ç½®æ¥ç¡®å®šå…ƒç´ æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨ã€‚ // useElementBottom.jsx import { useState, useEffect, useMemo } from 'react'; import { throttle } from 'lodash'; const useElementBottom = (element) =&gt; { const [reachedBottom, setReachedBottom] = useState(false); // event handler for determining if the user reached bottom const handleScroll = useMemo(() =&gt; { return throttle(() =&gt; { const { current } = element; // current holds the reference to element // if current scroll from bottom is less than equal to 10px const scrollBottom = current.scrollHeight - current.scrollTop - current.clientHeight; const reachingBottom = scrollBottom &lt;= 10; setReachedBottom(reachingBottom); }, 1000); }, []); // effect for binding event listener on element scroll useEffect(() =&gt; { const { current } = element; current.addEventListener('scroll', handleScroll); return () =&gt; current.removeEventListener('scroll', handleScroll); }, []); return reachedBottom; }; export default useElementBottom; æ¡ˆä¾‹ import useElementBottom from './useElementBottom'; const App = (props) =&gt; { const element = useRef(); // hook usage const scrolledBottom = useElementBottom(element); return ( &lt;div ref={element} style={{ height: '150vh' }}&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;p&gt;Scrolled to bottom {scrolledBottom}&lt;/p&gt; &lt;/div&gt; ); } 4. usePrevious æˆ‘ä»¬å¯ä»¥åˆ¶ä½œä¸€ä¸ªè‡ªå®šä¹‰hookæ¥è·å– prop æˆ– state çš„å…ˆå‰å€¼ã€‚ä½¿ç”¨ React ç±»ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ componentDidUpdate ç”Ÿå‘½å‘¨æœŸæ¥è·å–ä¹‹å‰çš„ prop å’Œ state å€¼ã€‚å¯¹äºåŠŸèƒ½ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰hookæ¥å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š // usePrevious.jsx import { useEffect, useRef } from 'react'; const usePrevious = (value) =&gt; { const ref = useRef(); // store current value in ref useEffect(() =&gt; { ref.current = value; }, [value]); // return previous value (happens before update in useEffect above) return ref.current; }; export default usePrevious; æˆ‘ä»¬ä½¿ç”¨ useRef hookæ¥å­˜å‚¨å…ˆå‰çš„å€¼ã€‚æˆ‘ä»¬çš„hookåœ¨ useEffect ä¸­æ›´æ–°å¼•ç”¨å¯¹è±¡ä¹‹å‰è¿”å›å…ˆå‰çš„å€¼ã€‚ import usePrevious from './usePrevious'; const App = () =&gt; { const [count, setCount] = useState(0); const prevCount = usePrevious(count); return ( &lt;div&gt; &lt;h1&gt;Now: {count}, before: {prevCount}&lt;/h1&gt; &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt; &lt;/div&gt; ); } 5. useWindowSize è¿™ä¸ªhookè¿”å›çª—å£çš„å®½åº¦å’Œé«˜åº¦ã€‚æˆ‘ä»¬åœ¨è°ƒæ•´çª—å£å¤§å°æ—¶è®¾ç½®äº†ä¸€ä¸ªå—é™åˆ¶çš„ set äº‹ä»¶ä¾¦å¬å™¨ï¼Œä»¥ä¾¿æˆ‘ä»¬æ¯æ¬¡éƒ½èƒ½è·å¾—æ­£ç¡®çš„å®½åº¦å’Œé«˜åº¦ã€‚ // useWindowSize import { useState, useEffect, useCallback } from 'react'; import { throttle } from 'throttle'; const useWindowSize = () =&gt; { const [size, setSize] = useState({ innerWidth: window.innerWidth, innerHeight: window.innerHeight, }); // throttled set listener that runs on window resize const throttledSetResizeListner = useCallback( throttle(() =&gt; { // set size in state setSize({ innerWidth: window.innerWidth, innerHeight: window.innerHeight, }); }, 1000), [] ); // effect for binding resize event on window useEffect(() =&gt; { // add throtelled set window resize event listener window.addEventListener('resize', throttledSetResizeListner); // remove throttled set window resize event listener return () =&gt; window.removeEventListener('resize', throttledSetResizeListner); }, [throttledSetResizeListner]); return size; }; export default useWindowSize; æ¡ˆä¾‹ å½“ä½ æƒ³æ ¹æ®çª—å£çš„å®½åº¦æˆ–é«˜åº¦åœ¨ä½ çš„ JS ä»£ç ä¸­åšä¸€äº›äº‹æƒ…æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚ import useWindowSize from './useWindowSize'; const App = () =&gt; { const { innerWidth, innerHeight } = useWindowSize(); return ( &lt;div&gt; {innerWidth &lt;= 768 ? 'I am on small screen' : 'I am on large screen'} &lt;/div&gt; ); } 6. useEventListener ä½¿ç”¨æ­¤hookå¯ä»¥è½»æ¾åœ°å°†äº‹ä»¶ä¾¦å¬å™¨ç»‘å®šåˆ°çª—å£æˆ–çª—å£å…ƒç´ ã€‚åœ¨hookçš„effectä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥å…ƒç´ æ˜¯å¦æ˜¯æ¥è‡ª useRef çš„å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å°†äº‹ä»¶ä¾¦å¬å™¨æ·»åŠ åˆ°å…¨å±€çª—å£å¯¹è±¡ã€‚ import { useEffect } from 'react'; const useEventListener = (event, handler, referencedElement) =&gt; { // effect for binding event handler to the element useEffect(() =&gt; { const element = referencedElement?.current || window; const isSupported = element &amp;&amp; element.addEventListener; if (!isSupported) return; // bind event to the element element.addEventListener(event, handler); return () =&gt; element.removeEventListener(event, handler); }, [referencedElement, event, handler]); return; }; export default useEventListener; import useEventListener from './useEventListener'; const App = (props) =&gt; { const element = useRef(); useEventListener('mouseover', handler, element); const handler =&gt; () =&gt; { console.log('Event triggered'); } return ( &lt;div ref={element}&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;div&gt; ); } æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„hookå°†äº‹ä»¶æ·»åŠ åˆ°çª—å£ import useEventListener from './useEventListener'; const App = (props) =&gt; { // adding event listener on window scroll useEventListener('scroll', handler); const handler =&gt; () =&gt; { console.log('Event triggered'); } return ( &lt;div&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;div&gt; ); } 7. useLocalStorageState æœ‰æ—¶ï¼Œå¯èƒ½éœ€è¦åœ¨æœ¬åœ°å­˜å‚¨å’ŒçŠ¶æ€ä¹‹é—´åŒæ­¥ä¸€ä¸ªå€¼ã€‚è¿™ä¸ªhookçš„ä½œç”¨å®Œå…¨ä¸€æ ·ã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ useState å¹¶æ£€æŸ¥æŒ‡å®šçš„é”®æ˜¯å¦åœ¨æœ¬åœ°å­˜å‚¨ä¸­å…·æœ‰æŸä¸ªå€¼ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨ä½œåˆå§‹å€¼ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨é¡µé¢åˆ·æ–°æ—¶ä¿æŒå€¼ä¸çŠ¶æ€åŒæ­¥ã€‚ // useLocalStorageState import { useState, useEffect } from 'react'; const useLocalStorageState = (key, defaultValue) =&gt; { const [value, setValue] = useState(() =&gt; { let val; try { // if there is a value in local storage for given key, set it as initial state val = JSON.parse(localStorage.getItem(key) || String(defaultValue)); } catch (error) { // otherwise, set default value as initial state val = defaultValue; } return val; }); // effect to update local storage when state changes useEffect(() =&gt; { localStorage.setItem(key, JSON.stringify(value)); }, [value]); return [value, setValue]; }; export default useLocalStorageState; å½“å€¼æ›´æ–°æ—¶ï¼Œä¼šè¿è¡Œä¸€ä¸ªeffect ï¼Œæ›´æ–°æœ¬åœ°å­˜å‚¨ä¸­çš„å€¼ã€‚ æ¡ˆä¾‹ å‡è®¾ä½ æƒ³åœ¨æœ¬åœ°å­˜å‚¨ä¸­å­˜å‚¨ç”¨æˆ·ä¸»é¢˜é¦–é€‰é¡¹ import useLocalStorageState from './useLocalStorageState'; const App = (props) =&gt; { // setting default theme to light const [theme, setTheme] = useLocalStorageState('theme', 'light'); return ( &lt;div&gt; &lt;p&gt;Current theme is {theme}&lt;/p&gt; &lt;button onClick={() =&gt; setTheme('dark')}&gt; Change theme to dark &lt;/button&gt; &lt;/div&gt; ); } å½“ä½ ç‚¹å‡»æ›´æ”¹ä¸»é¢˜æŒ‰é’®æ—¶ï¼ŒçŠ¶æ€å’Œæœ¬åœ°å­˜å‚¨ä¸­çš„å€¼éƒ½ä¼šæ›´æ–°ã€‚é¡µé¢åˆ·æ–°åï¼Œä½ å°†è·å¾—å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨ä¸­çš„æœ€åä¸€ä¸ªå€¼ã€‚ ç»“è¯­ æ„Ÿè°¢ä½ é˜…è¯»åˆ°æœ€åã€‚æˆ‘å¸Œæœ›è¿™äº›è‡ªå®šä¹‰hookå¯¹ä½ æœ‰ç”¨ã€‚ ","link":"https://umeimmense.github.io/post/ke-neng-xu-yao-de-7-ge-zi-ding-yi-react-hook"},{"title":"10ä¸ªå¸¸ç”¨çš„JavaScriptä½¿ç”¨æŠ€å·§","content":"å‰è¨€ ç¼–å†™ç®€çŸ­ã€ç®€æ´å’Œå¹²å‡€çš„ JavaScript ä»£ç çš„æŠ€å·§ğŸ˜ JavaScript æœ‰å¾ˆå¤šå¾ˆé…·çš„ç‰¹æ€§ï¼Œå¤§å¤šæ•°åˆå­¦è€…å’Œä¸­çº§å¼€å‘äººå‘˜éƒ½ä¸çŸ¥é“ã€‚æˆ‘æŒ‘é€‰äº† 10 ä¸ªæˆ‘åœ¨æ—¥å¸¸ JavaScript é¡¹ç›®ä¸­ä½¿ç”¨çš„æŠ€å·§ã€‚ 1. æœ‰æ¡ä»¶çš„å‘å¯¹è±¡ä¸­æ·»åŠ å±æ€§ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ ... æ¥æœ‰æ¡ä»¶åœ°å‘ JavaScript å¯¹è±¡å¿«é€Ÿæ·»åŠ å±æ€§ã€‚ const condition = true; const person = { id: 1, name: 'John Doe', ...(condition &amp;&amp; { age: 16 }), }; å¦‚æœæ¯ä¸ªæ“ä½œæ•°çš„è®¡ç®—ç»“æœéƒ½ä¸ºtrueï¼Œ &amp;&amp; è¿ç®—ç¬¦å°†è¿”å›æœ€åè®¡ç®—çš„è¡¨è¾¾å¼ã€‚å› æ­¤è¿”å›ä¸€ä¸ªå¯¹è±¡ { age: 16 }ï¼Œç„¶åå°†å…¶ä½œä¸º person å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚ å¦‚æœæ¡ä»¶ä¸º falseï¼Œåˆ™ JavaScript å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š const person = { id: 1, name: 'John Doe', ...(false), // evaluates to false }; // spreading false has no effect on the object console.log(person); // { id: 1, name: 'John Doe' } 2. æ£€æŸ¥ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªå¯¹è±¡ä¸­ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨inå…³é”®å­—æ¥æ£€æŸ¥ JavaScript å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨å±æ€§ const person = { name: 'John Doe', salary: 1000 }; console.log('salary' in person); // returns true console.log('age' in person); // returns false 3. å¯¹è±¡ä¸­çš„åŠ¨æ€å±æ€§åç§° ä½¿ç”¨åŠ¨æ€é”®è®¾ç½®å¯¹è±¡å±æ€§å¾ˆç®€å•ã€‚åªéœ€ä½¿ç”¨ ['key_name'] ç¬¦å·æ·»åŠ å±æ€§ const dynamic = 'flavour'; var item = { name: 'Biscuit', [dynamic]: 'Chocolate' } console.log(item); // { name: 'Biscuit', flavour: 'Chocolate' } åŒæ ·çš„æŠ€å·§ä¹Ÿå¯ç”¨äºä½¿ç”¨åŠ¨æ€é”®å¼•ç”¨å¯¹è±¡å±æ€§ï¼š const keyName = 'name'; console.log(item[keyName]); // returns 'Biscuit' 4. ä½¿ç”¨åŠ¨æ€é”®è¿›è¡Œå¯¹è±¡è§£æ„ ä½ å¯èƒ½çŸ¥é“ä½ å¯ä»¥è§£æ„ä¸€ä¸ªå˜é‡å¹¶ç«‹å³ç”¨ : ç¬¦å·é‡å‘½åå®ƒã€‚ä½†æ˜¯ä½ çŸ¥é“å½“ä½ ä¸çŸ¥é“é”®åæˆ–é”®åæ˜¯åŠ¨æ€çš„æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥è§£æ„å¯¹è±¡çš„å±æ€§å—ï¼Ÿ é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨è§£æ„ï¼ˆç”¨åˆ«åè§£æ„ï¼‰æ—¶é‡å‘½åå˜é‡ã€‚ const person = { id: 1, name: 'John Doe' }; const { name: personName } = person; console.log(personName); // returns 'John Doe' ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€é”®æ¥è§£æ„å±æ€§ï¼š const templates = { 'hello': 'Hello there', 'bye': 'Good bye' }; const templateName = 'bye'; const { [templateName]: template } = templates; console.log(template) // returns 'Good bye' 5. ?? è¿ç®—ç¬¦ è¿™ ??å½“ä½ è¦æ£€æŸ¥å˜é‡æ˜¯ null è¿˜æ˜¯ undefined æ—¶ï¼Œè¿ç®—ç¬¦å¾ˆæœ‰ç”¨ã€‚å½“å…¶å·¦ä¾§æ“ä½œæ•°ä¸ºç©ºæˆ–æœªå®šä¹‰æ—¶ï¼Œå®ƒè¿”å›å³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å…¶å·¦ä¾§æ“ä½œæ•°ã€‚ const foo = null ?? 'Hello'; console.log(foo); // returns 'Hello' const bar = 'Not null' ?? 'Hello'; console.log(bar); // returns 'Not null' const baz = 0 ?? 'Hello'; console.log(baz); // returns 0 åœ¨ç¬¬ä¸‰ä¸ªç¤ºä¾‹ä¸­ï¼Œè¿”å› 0 æ˜¯å› ä¸ºå³ä½¿ 0 åœ¨ JavaScript ä¸­è¢«è®¤ä¸ºæ˜¯å‡çš„ï¼Œä½†å®ƒä¸æ˜¯ null æˆ–æœªå®šä¹‰çš„ã€‚ä½ å¯èƒ½è®¤ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ||è¿ç®—ç¬¦åœ¨è¿™é‡Œï¼Œä½†è¿™ä¸¤è€…ä¹‹é—´å­˜åœ¨å·®å¼‚ï¼š const cannotBeZero = 0 || 5; console.log(cannotBeZero); // returns 5 const canBeZero = 0 ?? 5; console.log(canBeZero); // returns 0 6. ?. å¯é€‰é“¾ æˆ‘ä»¬éƒ½å¯èƒ½æ›¾ç»é‡åˆ°è¿‡TypeErrorï¼šæ— æ³•è¯»å– null çš„å±æ€§â€œfooâ€ä¹‹ç±»çš„é”™è¯¯ã€‚è¿™å¯¹æ¯ä¸ª JavaSript å¼€å‘äººå‘˜æ¥è¯´éƒ½æ˜¯å¤´ç–¼çš„é—®é¢˜ã€‚å¼•å…¥äº†å¯é€‰é“¾å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼š const book = { id:1, title: 'Title', author: null }; // normally, you would do this console.log(book.author.age) // throws error console.log(book.author &amp;&amp; book.author.age); // returns null (no error) // with optional chaining console.log(book.author?.age); // returns undefined // or deep optional chaining console.log(book.author?.address?.city); // returns undefined ä½ è¿˜å¯ä»¥ä½¿ç”¨å…·æœ‰ä»¥ä¸‹åŠŸèƒ½çš„å¯é€‰é“¾ï¼š const person = { firstName: 'Haseeb', lastName: 'Anwar', printName: function () { return `${this.firstName} ${this.lastName}`; }, }; console.log(person.printName()); // returns 'Haseeb Anwar' console.log(persone.doesNotExist?.()); // returns undefined 7. ä½¿ç”¨ !! çš„å¸ƒå°”è½¬æ¢ç¬¦ è¿™ !!è¿ç®—ç¬¦å¯ç”¨äºå°†è¡¨è¾¾å¼çš„ç»“æœå¿«é€Ÿè½¬æ¢ä¸ºå¸ƒå°”å€¼ true æˆ– falseã€‚å°±æ˜¯è¿™æ ·ï¼š const greeting = 'Hello there!'; console.log(!!greeting) // returns true const noGreeting = ''; console.log(!!noGreeting); // returns false 8. å­—ç¬¦ä¸²å’Œæ•´æ•°è½¬æ¢ ä½¿ç”¨ + è¿ç®—ç¬¦å¿«é€Ÿå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š const stringNumer = '123'; console.log(+stringNumer); // returns integer 123 console.log(typeof +stringNumer); // returns 'number' è¦å°†æ•°å­—å¿«é€Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨ + è¿ç®—ç¬¦åè·Ÿç©ºå­—ç¬¦ä¸² &quot;&quot;ï¼š const myString = 25 + ''; console.log(myString); // returns '25' console.log(typeof myString); // returns 'string' è¿™äº›ç±»å‹è½¬æ¢éå¸¸æ–¹ä¾¿ï¼Œä½†å®ƒä»¬çš„æ¸…æ™°åº¦å’Œä»£ç å¯è¯»æ€§è¾ƒå·®ã€‚å› æ­¤ï¼Œåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä¸€ä¸‹ã€‚ä¸è¿‡å¯ä»¥ç”¨æ‰code golfä¸­ã€‚ 9. æ£€æŸ¥æ•°ç»„ä¸­çš„å‡å€¼ ä½ ç†Ÿæ‚‰ filterã€some å’Œ every æ•°ç»„æ–¹æ³•ã€‚ä½†ä½ ä¹Ÿåº”è¯¥çŸ¥é“ï¼Œä½ å¯ä»¥ä»…ä½¿ç”¨å¸ƒå°”æ–¹æ³•æ¥æµ‹è¯•çœŸå€¼ï¼š const myArray = [null, false, 'Hello', undefined, 0]; // filter falsy values const filtered = myArray.filter(Boolean); console.log(filtered); // returns ['Hello'] // check if at least one value is truthy const anyTruthy = myArray.some(Boolean); console.log(anyTruthy); // returns true // check if all values are truthy const allTruthy = myArray.every(Boolean); console.log(allTruthy); // returns false è¿™æ˜¯å®ƒçš„å·¥ä½œåŸç†ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™äº›æ•°ç»„æ–¹æ³•é‡‡ç”¨å›è°ƒå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å°†å¸ƒå°”å€¼ä½œä¸ºå›è°ƒå‡½æ•°ä¼ é€’ã€‚ Boolean æœ¬èº«æ¥å—ä¸€ä¸ªå‚æ•°å¹¶æ ¹æ®å‚æ•°çš„çœŸå®æ€§è¿”å›trueæˆ– falseã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è¯´ï¼š myArray.filter(val =&gt; Boolean(val)); æ˜¯ä¸æ˜¯å’Œè¿™ä¸ªä¸€æ ·ï¼š myArray.filter(Boolean); 10.å±•å¹³æ•°ç»„ åŸå‹ Array ä¸Šæœ‰ä¸€ä¸ªæ–¹æ³• flat å¯ä»¥è®©ä½ ä»æ•°ç»„çš„æ•°ç»„ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼š const myArray = [{ id: 1 }, [{ id: 2 }], [{ id: 3 }]]; const flattedArray = myArray.flat(); // returns [ { id: 1 }, { id: 2 }, { id: 3 } ä½ è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªæ·±åº¦çº§åˆ«ï¼ŒæŒ‡å®šåµŒå¥—æ•°ç»„ç»“æ„åº”å±•å¹³çš„æ·±åº¦ã€‚ä¾‹å¦‚ï¼š const arr = [0, 1, 2, [[[3, 4]]]]; console.log(arr.flat(2)); // returns [0, 1, 2, [3,4]] ç»“è¯­ æ„Ÿè°¢ä½ é˜…è¯»åˆ°æœ€åã€‚æˆ‘å¸Œæœ›è¿™äº›æŠ€å·§å¯¹ä½ æœ‰ç”¨ã€‚ ","link":"https://umeimmense.github.io/post/shi-ge-chang-yong-de-javascript-shi-yong-ji-qiao"}]}