{"posts":[{"title":"JavaScript ä¸­çš„ Tree","content":"å‰è¨€ Treeæ˜¯ä¸€ç§æœ‰è¶£çš„æ•°æ®ç»“æ„ã€‚å®ƒåœ¨å„ä¸ªé¢†åŸŸéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚ä¾‹å¦‚ï¼š DOM æ˜¯ä¸€ç§TreeçŠ¶æ•°æ®ç»“æ„ æˆ‘ä»¬æ“ä½œç³»ç»Ÿä¸­çš„ç›®å½•å’Œæ–‡ä»¶å¯ä»¥è¡¨ç¤ºä¸ºTree å®¶åº­å±‚æ¬¡ç»“æ„å¯ä»¥è¡¨ç¤ºä¸ºTreeã€‚ Treeçš„è®¸å¤šå˜ä½“ï¼ˆå¦‚å †ã€BST ç­‰ï¼‰å¯ç”¨äºè§£å†³ä¸è°ƒåº¦ã€å›¾åƒå¤„ç†ã€æ•°æ®åº“ç­‰ç›¸å…³çš„é—®é¢˜ã€‚è®¸å¤šå¤æ‚çš„é—®é¢˜ä¹ä¸€çœ‹ä¼¼ä¹ä¸Treeæ— å…³ï¼Œä½†å¯ä»¥å®é™…ä¸Šè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªã€‚æˆ‘ä»¬ä¹Ÿä¼šï¼ˆåœ¨æœ¬ç³»åˆ—çš„åé¢éƒ¨åˆ†ï¼‰è§£å†³è¿™äº›é—®é¢˜ï¼Œä»¥äº†è§£Treeå¦‚ä½•ä½¿çœ‹ä¼¼å¤æ‚çš„é—®é¢˜æ›´å®¹æ˜“ç†è§£å’Œè§£å†³ã€‚ ç®€ä»‹ äºŒå‰æ ‘å®ç°èŠ‚ç‚¹éå¸¸ç®€å• function Node(value){ this.value = value this.left = null this.right = null } // usage const root = new Node(2) root.left = new Node(1) root.right = new Node(3) æ‰€ä»¥è¿™å‡ è¡Œä»£ç å°†ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªäºŒå‰æ ‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 2 / \\ / \\ 1 3 / \\ / \\ null null null null éå† è®©æˆ‘ä»¬ä»å°è¯•éå†è¿™äº›è¿æ¥çš„æ ‘èŠ‚ç‚¹ï¼ˆæˆ–ä¸€æ£µæ ‘ï¼‰å¼€å§‹ã€‚æ­£å¦‚æˆ‘ä»¬å¯ä»¥éå†æ•°ç»„ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬ä¹Ÿå¯ä»¥â€œéå†â€æ ‘èŠ‚ç‚¹ã€‚ç„¶è€Œï¼Œæ ‘ä¸æ˜¯åƒæ•°ç»„é‚£æ ·çš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥éå†è¿™äº›çš„æ–¹æ³•ä¸æ­¢ä¸€ç§ã€‚æˆ‘ä»¬å¯ä»¥å°†éå†æ–¹æ³•å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š å¹¿åº¦ä¼˜å…ˆéå† æ·±åº¦ä¼˜å…ˆéå† å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰ åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é€å±‚éå†æ ‘ã€‚æˆ‘ä»¬å°†ä»æ ¹å¼€å§‹ï¼Œç„¶åè¦†ç›–å®ƒçš„æ‰€æœ‰å­çº§ï¼Œç„¶åè¦†ç›–æ‰€æœ‰ 2 çº§å­çº§ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾‹å¦‚å¯¹äºä¸Šé¢çš„æ ‘ï¼Œéå†ä¼šå¯¼è‡´è¿™æ ·çš„ç»“æœï¼š 2 / \\ / \\ 1 3 / \\ / \\ null null null null 2ï¼Œ1ï¼Œ3 ä¸‹é¢æ˜¯ä¸€ä¸ªç¨å¾®å¤æ‚çš„æ ‘çš„æ’å›¾ï¼Œä½¿è¿™æ›´å®¹æ˜“ç†è§£ï¼š ä¸ºäº†å®ç°è¿™ç§å½¢å¼çš„éå†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é˜Ÿåˆ—ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æ•°æ®ç»“æ„ã€‚ä»¥ä¸‹æ˜¯æ•´ä¸ªç®—æ³•çš„è¿‡ç¨‹ï¼š åˆå§‹åŒ–ä¸€ä¸ªåŒ…å« root çš„é˜Ÿåˆ— ä»é˜Ÿåˆ—ä¸­åˆ é™¤ç¬¬ä¸€é¡¹ å°†å¼¹å‡ºé¡¹çš„å·¦å³èŠ‚ç‚¹æ¨å…¥é˜Ÿåˆ— é‡å¤æ­¥éª¤ 2 å’Œ 3ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º ä¸‹é¢æ˜¯è¿™ä¸ªç®—æ³•åœ¨å®ç°åçš„æ ·å­ï¼š function walkBFS(root){ if(root === null) return const queue = [root] while(queue.length){ const item = queue.shift() // do something console.log(item) if(item.left) queue.push(item.left) if(item.right) queue.push(item.right) } } æˆ‘ä»¬å¯ä»¥ç¨å¾®ä¿®æ”¹ä¸Šé¢çš„ç®—æ³•å®ç°ä¸ºï¼š function walkBFS(root){ if(root === null) return const queue = [root], ans = [] while(queue.length){ const len = queue.length, level = [] for(let i = 0; i &lt; len; i++){ const item = queue.shift() level.push(item) if(item.left) queue.push(item.left) if(item.right) queue.push(item.right) } ans.push(level) } return ans } æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰ åœ¨ DFS ä¸­ï¼Œæˆ‘ä»¬å–ä¸€ä¸ªèŠ‚ç‚¹å¹¶ç»§ç»­æ¢ç´¢å®ƒçš„å­èŠ‚ç‚¹ï¼Œç›´åˆ°æ·±åº¦è€—å°½ä¸ºæ­¢ã€‚å®ƒå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€å®Œæˆï¼š root node -&gt; left node -&gt; right node // pre-order traversal left node -&gt; root node -&gt; right node // in-order traversal left node -&gt; right node -&gt; root node // post-order traversal æ‰€æœ‰è¿™äº›éå†æŠ€æœ¯éƒ½å¯ä»¥é€’å½’å’Œè¿­ä»£å®ç°ã€‚è®©æˆ‘ä»¬è¿›å…¥å®ç°ç»†èŠ‚ï¼š å‰åºéå† åˆ†æ root node -&gt; left node -&gt; right node æŠ€å·§: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªç®€å•çš„æŠ€å·§æ¥æ‰‹åŠ¨æ‰¾å‡ºä»»ä½•æ ‘çš„å‰åºéå†ï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ•´æ£µæ ‘ï¼Œä¿æŒè‡ªå·±åœ¨å·¦è¾¹ã€‚ å®ç° é€’å½’ function walkPreOrder(root){ if(root === null) return // do something here console.log(root.val) // recurse through child nodes if(root.left) walkPreOrder(root.left) if(root.right) walkPreOrder(root.right) } è¿­ä»£ å‰åºéå†çš„è¿­ä»£æ–¹æ³•ä¸ BFS éå¸¸ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºæˆ‘ä»¬ä½¿ç”¨å †æ ˆè€Œä¸æ˜¯é˜Ÿåˆ—ï¼Œå¹¶ä¸”æˆ‘ä»¬é¦–å…ˆå°†å³èŠ‚ç‚¹æ¨å…¥å †æ ˆï¼š function walkPreOrder(root){ if(root === null) return const stack = [root] while(stack.length){ const item = stack.pop() // do something console.log(item) // Left child is pushed after right one, since we want to print left child first hence it must be above right child in the stack if(item.right) stack.push(item.right) if(item.left) stack.push(item.left) } } ","link":"https://umeimmense.github.io/post/javascript-zhong-de-tree"},{"title":"åˆæ¢ React Router 6 ","content":"å‰è¨€ ä¸ä¹…å‰ï¼ŒReact Router åº“æ›´æ–°åˆ°äº†ç¬¬ 6 ç‰ˆï¼Œéšä¹‹è€Œæ¥çš„æ˜¯ä¸€äº›æœ‰è¶£çš„å˜åŒ–ï¼Œæœ¬æ–‡å°†è®²è¿°React Router 6çš„ä¸€äº›æ–°ç‰¹æ€§åŠä½¿ç”¨çš„æ¡ˆä¾‹ã€‚ æ¥ä¸‹æ¥æ˜¯ä¸€äº›å‡†å¤‡å·¥ä½œï¼š é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ React é¡¹ç›®ï¼ˆä¾‹å¦‚ create-react-appï¼‰ã€‚ç„¶åï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£å®‰è£… React Routerã€‚ yarn add react-router-dom@latest æˆ‘ä»¬è¿™é‡Œå®‰è£…çš„æ˜¯6.0.2ç‰ˆæœ¬ã€‚ 2. ç¬¬ä¸€ä¸ªå®ç°ç»†èŠ‚å°†å‘Šè¯‰æˆ‘ä»¬çš„ React åº”ç”¨ç¨‹åºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ React Routerã€‚å› æ­¤ï¼Œåœ¨ React é¡¹ç›®çš„é¡¶çº§æ–‡ä»¶ï¼ˆä¾‹å¦‚ index.jsï¼‰ä¸­å¯¼å…¥ Router ç»„ä»¶ï¼Œå…¶ä¸­ React ä½¿ç”¨ ReactDOM API æŒ‚è½½åˆ° HTMLï¼š import React from 'react'; import ReactDOM from 'react-dom'; import { BrowserRouter } from 'react-router-dom'; import App from './App'; ReactDOM.render( &lt;BrowserRouter&gt; &lt;App /&gt; &lt;/BrowserRouter&gt;, document.getElementById('root') ); ä»è¿™é‡Œå¼€å§‹ï¼Œæˆ‘ä»¬å°†åœ¨ App.js æ–‡ä»¶ä¸­ç»§ç»­æˆ‘ä»¬çš„å®ç°ã€‚ åŒ¹é…è·¯ç”± é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ React Router çš„ Link ç»„ä»¶åœ¨æˆ‘ä»¬çš„ App ç»„ä»¶ä¸­å®ç°å¯¼èˆªã€‚æˆ‘ä¸å»ºè®®ä½¿ç”¨å†…è”æ ·å¼ï¼Œå› æ­¤è¯·æ ¹æ®ä½ çš„ React é¡¹ç›®é€‰æ‹©åˆé€‚çš„æ ·å¼ç­–ç•¥å’Œæ ·å¼æ–¹æ³•ï¼š import { Link } from 'react-router-dom'; const App = () =&gt; { return ( &lt;&gt; &lt;h1&gt;React Router&lt;/h1&gt; &lt;Navigation /&gt; &lt;/&gt; ); }; const Navigation = () =&gt; { return ( &lt;nav style={{ borderBottom: 'solid 1px', paddingBottom: '1rem', }} &gt; &lt;Link to=&quot;/home&quot;&gt;Home&lt;/Link&gt; &lt;Link to=&quot;/users&quot;&gt;Users&lt;/Link&gt; &lt;/nav&gt; ); }; å½“ä½ åœ¨æµè§ˆå™¨ä¸­å¯åŠ¨ React åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå•å‡»ä¸¤ä¸ª Link ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶åº”è¯¥å°†ä½ å¯¼èˆªåˆ°å„è‡ªçš„è·¯ç”±ã€‚å•å‡»è¿™äº›é“¾æ¥æ—¶ï¼Œå¯é€šè¿‡æ£€æŸ¥æµè§ˆå™¨çš„å½“å‰ URL æ¥ç¡®è®¤ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ React Router çš„ Route ç»„ä»¶å°†è·¯ç”±æ˜ å°„åˆ°å®é™…æ¸²æŸ“ï¼š import { Routes, Route, Link } from 'react-router-dom'; const App = () =&gt; { return ( &lt;&gt; &lt;h1&gt;React Router&lt;/h1&gt; &lt;Navigation /&gt; &lt;Routes&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users /&gt;} /&gt; &lt;/Routes&gt; &lt;/&gt; ); }; const Navigation = () =&gt; { return ( &lt;nav style={{ borderBottom: 'solid 1px', paddingBottom: '1rem', }} &gt; &lt;Link to=&quot;/home&quot;&gt;Home&lt;/Link&gt; &lt;Link to=&quot;/users&quot;&gt;Users&lt;/Link&gt; &lt;/nav&gt; ); }; ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥å®ƒä»¬å„è‡ªçš„ to å’Œ path å±æ€§æ¥æŸ¥çœ‹ Link å’Œ Route ç»„ä»¶ä¹‹é—´çš„ç›´æ¥åŒ¹é…ã€‚å½“è·¯ç”±åŒ¹é…æ—¶ï¼Œæ¯ä¸ª Route ç»„ä»¶éƒ½ä¼šæ¸²æŸ“ä¸€ä¸ª React å…ƒç´ ã€‚ç”±äºæˆ‘ä»¬åœ¨è¿™é‡Œæ¸²æŸ“ä¸€ä¸ª React å…ƒç´ ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ é€’ React propsã€‚ç¼ºå°‘çš„æ˜¯ç›¸åº”åŠŸèƒ½ç»„ä»¶çš„å£°æ˜ï¼š const Home = () =&gt; { return ( &lt;main style={{ padding: '1rem 0' }}&gt; &lt;h2&gt;Home&lt;/h2&gt; &lt;/main&gt; ); }; const Users = () =&gt; { return ( &lt;main style={{ padding: '1rem 0' }}&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;/main&gt; ); }; è¿”å›æµè§ˆå™¨æ—¶ï¼Œä½ åº”è¯¥èƒ½å¤Ÿåœ¨çœ‹åˆ° Home å’Œ Users ç»„ä»¶çš„åŒæ—¶ä»ä¸€ä¸ªé¡µé¢å¯¼èˆªåˆ°å¦ä¸€ä¸ªé¡µé¢ï¼ˆæ­¤å¤„ï¼šä» /home åˆ° /users è·¯ç”±ï¼‰ã€‚åŸºæœ¬ä¸Šè¿™å°±æ˜¯ React Router çš„æœ¬è´¨ï¼šè®¾ç½® Link ç»„ä»¶å¹¶å°†å®ƒä»¬ä¸ Route ç»„ä»¶åŒ¹é…ã€‚é“¾æ¥ä¸è·¯ç”±æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå› æ­¤ä½ çš„åº”ç”¨ç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªé“¾æ¥é“¾æ¥åˆ°åŒä¸€ä¸ªè·¯ç”±ã€‚ å¸ƒå±€è·¯ç”±ã€ç´¢å¼•è·¯ç”±ã€æ— åŒ¹é…è·¯ç”± æ¥ä¸‹æ¥ï¼Œä½ å°†çœ‹åˆ°æ–°çš„ Home å’Œ Users ç»„ä»¶å¦‚ä½•å…±äº«ç›¸åŒçš„å¸ƒå±€ã€‚ä½œä¸º React å¼€å‘äººå‘˜ï¼Œç›´è§‰ä¸Šæˆ‘ä»¬ä¼šä» Home å’Œ Users ç»„ä»¶ä¸­æå–ä¸€ä¸ªå¸¦æœ‰æ ·å¼çš„æ–°ç»„ä»¶ï¼Œä»¥é¿å…é‡å¤ã€‚åœ¨è¿™ä¸ªæ–°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ React çš„ children å±æ€§å°†ç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ã€‚ç¬¬ä¸€æ­¥ï¼Œå°†æ ·å¼æå–åˆ°å®ƒè‡ªå·±çš„ç»„ä»¶ä¸­ï¼š const Home = () =&gt; { return ( &lt;&gt; &lt;h2&gt;Home&lt;/h2&gt; &lt;/&gt; ); }; const Users = () =&gt; { return ( &lt;&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;/&gt; ); }; const Layout = ({ children }) =&gt; { return &lt;main style={{ padding: '1rem 0' }}&gt;{children}&lt;/main&gt;; }; å…¶æ¬¡ï¼Œåœ¨ App ç»„ä»¶ä¸­æ¸²æŸ“å®ƒã€‚é€šè¿‡ä½¿ç”¨ React çš„å­çº§ï¼ŒLayout ç»„ä»¶åº”è¯¥æ¸²æŸ“åŒ¹é…çš„å°é—­å­è·¯ç”±ï¼š import { Routes, Route, Link } from 'react-router-dom'; const App = () =&gt; { return ( &lt;&gt; &lt;h1&gt;React Router&lt;/h1&gt; &lt;Navigation /&gt; &lt;Routes&gt; &lt;Layout&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users /&gt;} /&gt; &lt;/Layout&gt; &lt;/Routes&gt; &lt;/&gt; ); }; const Navigation = () =&gt; { return ( &lt;nav style={{ borderBottom: 'solid 1px', paddingBottom: '1rem', }} &gt; &lt;Link to=&quot;/home&quot;&gt;Home&lt;/Link&gt; &lt;Link to=&quot;/users&quot;&gt;Users&lt;/Link&gt; &lt;/nav&gt; ); }; const Home = () =&gt; { return ( &lt;&gt; &lt;h2&gt;Home&lt;/h2&gt; &lt;/&gt; ); }; const Users = () =&gt; { return ( &lt;&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;/&gt; ); }; const Layout = ({ children }) =&gt; { return &lt;main style={{ padding: '1rem 0' }}&gt;{children}&lt;/main&gt;; }; ä½†æ˜¯ä½ ä¼šçœ‹åˆ°è¿™åœ¨ React Router ä¸­æ˜¯ä¸å…è®¸çš„ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸è¯´ï¼š çš„æ‰€æœ‰ç»„ä»¶å­é¡¹å¿…é¡»æ˜¯ æˆ– &lt;React.Fragment&gt;ã€‚è§£å†³æ­¤é—®é¢˜çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯åœ¨æ¯ä¸ªç»„ä»¶ä¸­å•ç‹¬ä½¿ç”¨ Layout ç»„ä»¶ï¼ˆç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ï¼‰æˆ–åœ¨æ¯ä¸ª Route ç»„ä»¶ä¸­ï¼ˆå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼‰ï¼š const App = () =&gt; { return ( &lt;&gt; ... &lt;Routes&gt; &lt;Route path=&quot;home&quot; element={&lt;Layout&gt;&lt;Home /&gt;&lt;/Layout&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Layout&gt;&lt;Users /&gt;&lt;/Layout&gt;} /&gt; &lt;/Routes&gt; &lt;/&gt; ); }; ç„¶è€Œï¼Œè¿™ç»™ React åº”ç”¨ç¨‹åºå¢åŠ äº†ä¸å¿…è¦çš„å†—ä½™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ‰€è°“çš„ Layout Routeï¼Œè€Œä¸æ˜¯å¤åˆ¶ Layout ç»„ä»¶ï¼Œå®ƒä¸æ˜¯å®é™…çš„è·¯ç”±ï¼Œè€Œåªæ˜¯ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥è®©ä¸€ç»„ Route ä¸­çš„æ¯ä¸ª Route ç»„ä»¶çš„å…ƒç´ å…·æœ‰ç›¸åŒçš„å‘¨å›´æ ·å¼ï¼š const App = () =&gt; { return ( &lt;&gt; ... &lt;Routes&gt; &lt;Route element={&lt;Layout /&gt;}&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users /&gt;} /&gt; &lt;/Route&gt; &lt;/Routes&gt; &lt;/&gt; ); }; å¦‚ä½ æ‰€è§ï¼Œå¯ä»¥å°† Route ç»„ä»¶åµŒå¥—åœ¨å¦ä¸€ä¸ª Route ç»„ä»¶ä¸­â€”â€”è€Œå‰è€…æˆä¸ºæ‰€è°“çš„åµŒå¥—è·¯ç”±ã€‚ç°åœ¨ä¸å†åœ¨ Layout ç»„ä»¶ä¸­ä½¿ç”¨ React çš„å­ç»„ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨ React Router çš„ Outlet ç»„ä»¶ä½œä¸ºç­‰æ•ˆç»„ä»¶ï¼š import { Routes, Route, Outlet, Link } from 'react-router-dom'; ... const Layout = () =&gt; { return ( &lt;main style={{ padding: '1rem 0' }}&gt; &lt;Outlet /&gt; &lt;/main&gt; ); }; æœ¬è´¨ä¸Šï¼ŒLayout ç»„ä»¶ä¸­çš„ Outlet ç»„ä»¶æ’å…¥äº†çˆ¶è·¯ç”±ï¼ˆè¿™é‡Œï¼šLayout ç»„ä»¶ï¼‰çš„åŒ¹é…å­è·¯ç”±ï¼ˆè¿™é‡Œï¼šHome æˆ– Users ç»„ä»¶ï¼‰ã€‚æ¯•ç«Ÿï¼Œä½¿ç”¨ Layout Route å¯ä»¥å¸®åŠ©ä½ ä¸ºé›†åˆä¸­çš„æ¯ä¸ª Route ç»„ä»¶æä¾›ç›¸åŒçš„å¸ƒå±€ï¼ˆä¾‹å¦‚ï¼ŒCSS æ ·å¼ï¼ŒHTML ç»“æ„ï¼‰ã€‚ ä»è¿™é‡Œå¼€å§‹ï¼Œä½ å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œå°† App ç»„ä»¶çš„æ‰€æœ‰å®ç°ç»†èŠ‚ï¼ˆæ ‡é¢˜ã€å¯¼èˆªï¼‰ç§»åŠ¨åˆ°è¿™ä¸ªæ–°çš„ Layout ç»„ä»¶ä¸­ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ NavLink ç»„ä»¶äº¤æ¢é“¾æ¥ï¼Œä»¥å®ç°æ‰€è°“çš„æ´»åŠ¨é“¾æ¥â€”â€”å‘ç”¨æˆ·æ˜¾ç¤ºå½“å‰æ´»åŠ¨çš„è·¯çº¿ã€‚å› æ­¤ï¼Œå½“å°†æ–°çš„ NavLink ç»„ä»¶ä¸å‡½æ•°ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®å…¶styleå’Œ className propsä¸­çš„ isActive æ ‡å¿—ï¼š import { Routes, Route, Link, NavLink, Outlet } from 'react-router-dom'; const App = () =&gt; { return ( &lt;&gt; &lt;h1&gt;React Router&lt;/h1&gt; &lt;Navigation /&gt; &lt;Routes&gt; &lt;Route element={&lt;Layout /&gt;}&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users /&gt;} /&gt; &lt;/Route&gt; &lt;/Routes&gt; &lt;/&gt; ); }; const Navigation = () =&gt; { return ( &lt;nav style={{ borderBottom: 'solid 1px', paddingBottom: '1rem', }} &gt; &lt;Link to=&quot;/home&quot;&gt;Home&lt;/Link&gt; &lt;Link to=&quot;/users&quot;&gt;Users&lt;/Link&gt; &lt;/nav&gt; ); }; const Home = () =&gt; { return ( &lt;&gt; &lt;h2&gt;Home&lt;/h2&gt; &lt;/&gt; ); }; const Users = () =&gt; { return ( &lt;&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;/&gt; ); }; const Layout = () =&gt; { const style = ({ isActive }) =&gt; ({ fontWeight: isActive ? 'bold' : 'normal', }); return ( &lt;&gt; &lt;h1&gt;React Router&lt;/h1&gt; &lt;nav style={{ borderBottom: 'solid 1px', paddingBottom: '1rem', }} &gt; &lt;NavLink to=&quot;/home&quot; style={style}&gt;Home&lt;/NavLink&gt; &lt;NavLink to=&quot;/users&quot; style={style}&gt;Users&lt;/NavLink&gt; &lt;/nav&gt; &lt;main style={{ padding: '1rem 0' }}&gt; &lt;Outlet /&gt; &lt;/main&gt; &lt;/&gt; ); }; æ¥ä¸‹æ¥ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°è¿™ä¸ª React åº”ç”¨ç¨‹åºç¼ºå°‘ä¸€ä¸ªåŸºæœ¬è·¯ç”±ã€‚è™½ç„¶æˆ‘ä»¬æœ‰ /home å’Œ /users è·¯ç”±ï¼Œä½†æ²¡æœ‰ / è·¯ç”±ã€‚ä½ ä¹Ÿä¼šåœ¨æµè§ˆå™¨çš„å¼€å‘äººå‘˜å·¥å…·ä¸­çœ‹åˆ°æ­¤è­¦å‘Šï¼šæ²¡æœ‰è·¯ç”±åŒ¹é…ä½ç½®â€œ/â€ã€‚å› æ­¤ï¼Œæ¯å½“ç”¨æˆ·è®¿é—® / è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ‰€è°“çš„ç´¢å¼•è·¯ç”±ä½œä¸ºå›é€€ã€‚æ­¤å›é€€è·¯ç”±çš„å…ƒç´ å¯ä»¥æ˜¯æ–°ç»„ä»¶æˆ–ä»»ä½•å·²åŒ¹é…çš„è·¯ç”±ï¼ˆä¾‹å¦‚ï¼ŒHome åº”ä¸ºè·¯ç”± / å’Œ /home å‘ˆç°ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼‰ï¼š const App = () =&gt; { return ( &lt;Routes&gt; &lt;Route element={&lt;Layout /&gt;}&gt; &lt;Route index element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users /&gt;} /&gt; &lt;/Route&gt; &lt;/Routes&gt; ); }; å½“çˆ¶è·¯ç”±åŒ¹é…ä½†æ²¡æœ‰å­è·¯ç”±åŒ¹é…æ—¶ï¼Œä½ å¯ä»¥å°†ç´¢å¼•è·¯ç”±è§†ä¸ºé»˜è®¤è·¯ç”±ã€‚æ¥ä¸‹æ¥ï¼Œå¦‚æœç”¨æˆ·å¯¼èˆªåˆ°ä¸åŒ¹é…çš„è·¯ç”±ï¼ˆä¾‹å¦‚ /aboutï¼‰ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªæ‰€è°“çš„ No Match Routeï¼ˆä¹Ÿç§°ä¸º Not Found Routeï¼‰ï¼Œå®ƒç›¸å½“äºç½‘ç«™çš„ 404 é¡µé¢ï¼š const App = () =&gt; { return ( &lt;Routes&gt; &lt;Route element={&lt;Layout /&gt;}&gt; &lt;Route index element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users /&gt;} /&gt; &lt;Route path=&quot;*&quot; element={&lt;NoMatch /&gt;} /&gt; &lt;/Route&gt; &lt;/Routes&gt; ); }; const NoMatch = () =&gt; { return (&lt;p&gt;There's nothing here: 404!&lt;/p&gt;); }; åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨ä½¿ç”¨ Routes ç»„ä»¶ä½œä¸º Route ç»„ä»¶é›†åˆçš„å®¹å™¨æ—¶ï¼Œé€šè¿‡ä½¿ç”¨ Layout Routesã€Index Routes å’Œ No Match Routes å±•ç¤ºäº† React Router çš„å…¶ä»–æœ€ä½³å®è·µã€‚å¦‚ä½ æ‰€è§ï¼Œä¹Ÿå¯ä»¥å°† Route ç»„ä»¶åµŒå¥—åˆ° Route ç»„ä»¶ä¸­ã€‚\bä¸‹é¢æˆ‘ä»¬æ¥ç€äº†è§£æœ‰å…³åµŒå¥—è·¯ç”±çš„æ›´å¤šä¿¡æ¯ã€‚ åŠ¨æ€ä¸”åµŒå¥—çš„è·¯ç”± æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç”¨å®ç°ç»†èŠ‚æ¥è£…é¥°ç”¨æˆ·ç»„ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„ App ç»„ä»¶ä¸­åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨ï¼ˆè¿™é‡Œæ˜¯ï¼šç”¨æˆ·ï¼‰ã€‚è¯¥åˆ—è¡¨åªæ˜¯ç¤ºä¾‹æ•°æ®ï¼Œä½†å®ƒä¹Ÿå¯ä»¥åœ¨ React ä¸­ä»è¿œç¨‹ API è·å–ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬å°†ç”¨æˆ·ä½œä¸ºpropsä¼ é€’ç»™ç”¨æˆ·ç»„ä»¶ï¼š const App = () =&gt; { const users = [ { id: '1', fullName: 'Robin Wieruch' }, { id: '2', fullName: 'Sarah Finnley' }, ]; return ( &lt;Routes&gt; &lt;Route element={&lt;Layout /&gt;}&gt; &lt;Route index element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users users={users} /&gt;} /&gt; &lt;Route path=&quot;*&quot; element={&lt;NoMatch /&gt;} /&gt; &lt;/Route&gt; &lt;/Routes&gt; ); }; Users ç»„ä»¶æˆä¸º React ä¸­çš„åˆ—è¡¨ç»„ä»¶ï¼Œå› ä¸ºå®ƒéå†æ¯ä¸ªç”¨æˆ·å¹¶ä¸ºå…¶è¿”å› JSXã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå› ä¸ºæˆ‘ä»¬å°† React Router çš„ Link ç»„ä»¶æ·»åŠ åˆ°ç»„åˆä¸­ã€‚ Link ç»„ä»¶ä¸­çš„ç›¸å¯¹è·¯å¾„æç¤ºç›¸åº”çš„åŠ¨æ€ï¼ˆæ­¤å¤„ï¼š/user.idï¼‰å°šæœªåµŒå¥—ï¼ˆæ­¤å¤„ï¼š/{user.id}ï¼‰å°šæœªåµŒå¥—ï¼ˆæ­¤å¤„ï¼š/user.idï¼‰å°šæœªåµŒå¥—ï¼ˆæ­¤å¤„ï¼š/{user.id} åµŒå¥—åœ¨ /users ä¸­ï¼‰è·¯ç”±ï¼š const Users = ({ users }) =&gt; { return ( &lt;&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;ul&gt; {users.map((user) =&gt; ( &lt;li key={user.id}&gt; &lt;Link to={`/users/${user.id}`}&gt; {user.fullName} &lt;/Link&gt; &lt;/li&gt; ))} &lt;/ul&gt; &lt;/&gt; ); }; é€šè¿‡æ‹¥æœ‰è¿™ä¸ªæ–°çš„åŠ¨æ€åµŒå¥—è·¯ç”±ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ App ç»„ä»¶ä¸­ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªåŒ¹é…çš„åµŒå¥—è·¯ç”±ç»„ä»¶ã€‚é¦–å…ˆï¼Œç”±äºå®ƒæ˜¯ /users è·¯ç”±çš„æ‰€è°“åµŒå¥—è·¯ç”±ï¼ˆæˆ–å­è·¯ç”±ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒåµŒå¥—åœ¨ç›¸åº”çš„çˆ¶è·¯ç”±ç»„ä»¶ä¸­ã€‚æ­¤å¤–ï¼Œç”±äºå®ƒæ˜¯æ‰€è°“çš„åŠ¨æ€è·¯ç”±ï¼Œå®ƒä½¿ç”¨å®šä¹‰ä¸º :userId çš„åŠ¨æ€è·¯ç”±ï¼Œè€Œç”¨æˆ·çš„æ ‡è¯†ç¬¦åˆ™åŠ¨æ€åŒ¹é…ï¼ˆä¾‹å¦‚ï¼Œid ä¸º '1' çš„ç”¨æˆ·å°†ä¸ /users/1 åŒ¹é…ï¼‰ï¼š const App = () =&gt; { const users = [ { id: '1', fullName: 'Robin Wieruch' }, { id: '2', fullName: 'Sarah Finnley' }, ]; return ( &lt;Routes&gt; &lt;Route element={&lt;Layout /&gt;}&gt; &lt;Route index element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users users={users} /&gt;}&gt; &lt;Route path=&quot;:userId&quot; element={&lt;User /&gt;} /&gt; &lt;/Route&gt; &lt;Route path=&quot;*&quot; element={&lt;NoMatch /&gt;} /&gt; &lt;/Route&gt; &lt;/Routes&gt; ); }; ä¹‹å‰ï¼Œå½“æˆ‘ä»¬ä»‹ç»å°† /home å’Œ /users è·¯ç”±ä½œä¸ºå…¶å­è·¯ç”±çš„çˆ¶å¸ƒå±€è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†åµŒå¥—è·¯ç”±ã€‚å½“æˆ‘ä»¬è¿›è¡Œæ­¤æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨çˆ¶è·¯ç”±ä¸­çš„ Outlet ç»„ä»¶æ¥æ¸²æŸ“åŒ¹é…çš„å­è·¯ç”±ã€‚åŒæ ·çš„æƒ…å†µåœ¨è¿™é‡Œå†æ¬¡å‘ç”Ÿï¼Œå› ä¸ºç”¨æˆ·ç»„ä»¶ä¹Ÿå¿…é¡»æ¸²æŸ“å®ƒçš„åµŒå¥—è·¯ç”±ï¼š const Users = ({ users }) =&gt; { return ( &lt;&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;ul&gt;...&lt;/ul&gt; &lt;Outlet /&gt; &lt;/&gt; ); }; æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å£°æ˜ç¼ºå°‘çš„ User ç»„ä»¶ï¼Œåªè¦ç”¨æˆ·çš„æ ‡è¯†ç¬¦åœ¨ URL ä¸­åŒ¹é…ï¼Œè¯¥ç»„ä»¶å°±ä¼šé€šè¿‡ Users ç»„ä»¶ä¸­çš„ Outlet åµŒå¥—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ React Router çš„ useParams Hook ä» URL ä¸­è·å–ç›¸åº”çš„ userIdï¼ˆç­‰äº :userIdï¼‰ï¼š import { ... useParams, } from 'react-router-dom'; ... const User = () =&gt; { const { userId } = useParams(); return ( &lt;&gt; &lt;h2&gt;User: {userId}&lt;/h2&gt; &lt;Link to=&quot;/users&quot;&gt;Back to Users&lt;/Link&gt; &lt;/&gt; ); }; æˆ‘ä»¬å†æ¬¡çœ‹åˆ°äº†å¦‚ä½•é€šè¿‡å°†ä¸€ä¸ª Route ç»„ä»¶ï¼ˆæˆ–å¤šä¸ª Route ç»„ä»¶ï¼‰åµŒå¥—åœ¨å¦ä¸€ä¸ª Route ç»„ä»¶ä¸­æ¥åˆ›å»ºåµŒå¥—è·¯ç”±ã€‚å‰è€…æ˜¯åµŒå¥—çš„å­è·¯ç”±ï¼Œåè€…æ˜¯æ¸²æŸ“å°é—­ç»„ä»¶çš„çˆ¶è·¯ç”±ï¼Œè¯¥ç»„ä»¶å¿…é¡»ä½¿ç”¨ Outlet ç»„ä»¶æ¥æ¸²æŸ“å®é™…åŒ¹é…çš„å­è·¯ç”±ã€‚ æˆ‘ä»¬è¿˜çœ‹åˆ°äº†å¦‚ä½•é€šè¿‡åœ¨è·¯ç”±çš„è·¯å¾„å±æ€§ï¼ˆä¾‹å¦‚ï¼šuserIdï¼‰ä¸­ä½¿ç”¨å†’å·æ¥åˆ›å»ºåŠ¨æ€è·¯ç”±ã€‚æœ¬è´¨ä¸Šï¼Œ :userId å……å½“ä»»ä½•æ ‡è¯†ç¬¦çš„æ˜Ÿå·ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Link ç»„ä»¶å°†ç”¨æˆ·å¯¼èˆªåˆ° /users/:userId è·¯ç”±ï¼Œå…¶ä¸­â€‹â€‹ :userId ä»£è¡¨å®é™…ç”¨æˆ·çš„æ ‡è¯†ç¬¦ã€‚æœ€åï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥é€šè¿‡ä½¿ç”¨ React Router çš„ useParams Hook ä» URL ä¸­è·å–åŠ¨æ€è·¯å¾„ï¼ˆç§°ä¸ºå‚æ•°æˆ– paramsï¼‰ã€‚ React Routerä¸­çš„ç›¸å…³é“¾æ¥ æœ€æ–°ç‰ˆæœ¬çš„ React Router å¸¦æœ‰æ‰€è°“çš„ç›¸å¯¹é“¾æ¥ã€‚æˆ‘ä»¬å°†é€šè¿‡æŸ¥çœ‹ç”¨æˆ·ç»„ä»¶åŠå…¶ç”¨äºé“¾æ¥ç»„ä»¶çš„ç»å¯¹ /users/${user.id} è·¯å¾„æ¥ç ”ç©¶è¿™ä¸ªæ¦‚å¿µã€‚åœ¨ä¹‹å‰ç‰ˆæœ¬çš„ React Router ä¸­ï¼Œéœ€è¦æŒ‡å®šæ•´ä¸ªè·¯å¾„ã€‚ä½†æ˜¯ï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä»…ä½¿ç”¨åµŒå¥—è·¯å¾„ä½œä¸ºç›¸å¯¹è·¯å¾„ï¼š const Users = ({ users }) =&gt; { return ( &lt;&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;ul&gt; {users.map((user) =&gt; ( &lt;li key={user.id}&gt; &lt;Link to={user.id}&gt; {user.fullName} &lt;/Link&gt; &lt;/li&gt; ))} &lt;/ul&gt; &lt;/&gt; ); }; ç”±äº Users ç»„ä»¶ç”¨äº /users è·¯ç”±ï¼Œå› æ­¤ Users ç»„ä»¶ä¸­çš„ Link çŸ¥é“å…¶å½“å‰ä½ç½®ï¼Œä¸éœ€è¦åˆ›å»ºç»å¯¹è·¯å¾„çš„æ•´ä¸ªé¡¶çº§éƒ¨åˆ†ã€‚ç›¸åï¼Œå®ƒçŸ¥é“ /users å¹¶ä¸”åªæ˜¯é™„åŠ  :userId ä½œä¸ºå®ƒçš„ç›¸å¯¹è·¯å¾„ã€‚ å£°æ˜å¼å’Œç¨‹åºå¼å¯¼èˆª åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªåœ¨ä½¿ç”¨ Link æˆ– NavLink ç»„ä»¶æ—¶ä½¿ç”¨äº†å£°æ˜å¼å¯¼èˆªã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›èƒ½å¤Ÿé€šè¿‡ JavaScript ä»¥ç¼–ç¨‹æ–¹å¼å¯¼èˆªç”¨æˆ·ã€‚æˆ‘ä»¬å°†é€šè¿‡å®ç°ä¸€ä¸ªå¯ä»¥åœ¨ User ç»„ä»¶ä¸­åˆ é™¤ç”¨æˆ·çš„åŠŸèƒ½æ¥å±•ç¤ºè¿™ä¸ªåœºæ™¯ã€‚åœ¨åˆ é™¤åï¼Œç”¨æˆ·åº”è¯¥ä» User ç»„ä»¶å¯¼èˆªåˆ° Users ç»„ä»¶ï¼ˆä» /users/:userId åˆ° /usersï¼‰ã€‚ æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨ React çš„ useState Hook åˆ›å»ºä¸€ä¸ªæœ‰çŠ¶æ€çš„ users å€¼æ¥å¼€å§‹è¿™ä¸ªå®ç°ï¼Œç„¶åå®ç°ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¯¥å¤„ç†ç¨‹åºä½¿ç”¨æ ‡è¯†ç¬¦ä»ç”¨æˆ·ä¸­åˆ é™¤ç”¨æˆ·ï¼š import * as React from 'react'; ... const App = () =&gt; { const [users, setUsers] = React.useState([ { id: '1', fullName: 'Robin Wieruch' }, { id: '2', fullName: 'Sarah Finnley' }, ]); const handleRemoveUser = (userId) =&gt; { setUsers((state) =&gt; state.filter((user) =&gt; user.id !== userId)); }; return ( &lt;Routes&gt; &lt;Route element={&lt;Layout /&gt;}&gt; &lt;Route index element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;home&quot; element={&lt;Home /&gt;} /&gt; &lt;Route path=&quot;users&quot; element={&lt;Users users={users} /&gt;}&gt; &lt;Route path=&quot;:userId&quot; element={&lt;User onRemoveUser={handleRemoveUser} /&gt;} /&gt; &lt;/Route&gt; &lt;Route path=&quot;*&quot; element={&lt;NoMatch /&gt;} /&gt; &lt;/Route&gt; &lt;/Routes&gt; ); }; åœ¨æˆ‘ä»¬å°†äº‹ä»¶å¤„ç†ç¨‹åºä½œä¸ºå›è°ƒå¤„ç†ç¨‹åºä¼ é€’ç»™ User ç»„ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‚£é‡Œä½¿ç”¨å®ƒä½œä¸ºå†…è”å¤„ç†ç¨‹åºæ¥é€šè¿‡æ ‡è¯†ç¬¦åˆ é™¤ç‰¹å®šç”¨æˆ·ï¼š const User = ({ onRemoveUser }) =&gt; { const { userId } = useParams(); return ( &lt;&gt; &lt;h2&gt;User: {userId}&lt;/h2&gt; &lt;button type=&quot;button&quot; onClick={() =&gt; onRemoveUser(userId)}&gt; Remove &lt;/button&gt; &lt;Link to=&quot;/users&quot;&gt;Back to Users&lt;/Link&gt; &lt;/&gt; ); }; ä¸€æ—¦ç”¨æˆ·è¢«åˆ é™¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ React Router çš„ useNavigate Hookï¼Œå®ƒå…è®¸æˆ‘ä»¬ä»¥ç¼–ç¨‹æ–¹å¼å°†ç”¨æˆ·å¯¼èˆªåˆ°å¦ä¸€ä¸ªè·¯ç”±ï¼ˆè¿™é‡Œï¼š/usersï¼‰ï¼š import * as React from 'react'; import { ... useNavigate, } from 'react-router-dom'; const App = () =&gt; { const navigate = useNavigate(); const [users, setUsers] = React.useState([ { id: '1', fullName: 'Robin Wieruch' }, { id: '2', fullName: 'Sarah Finnley' }, ]); const handleRemoveUser = (userId) =&gt; { setUsers((state) =&gt; state.filter((user) =&gt; user.id !== userId)); navigate('/users'); }; return (...); }; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ é™¤æ“ä½œæ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼Œå› ä¸ºç”¨æˆ·åªæ˜¯å®¢æˆ·ç«¯çš„ä¸€ä¸ªæœ‰çŠ¶æ€å€¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœç”¨æˆ·æ˜¯æ•°æ®åº“ä¸­çš„å®ä½“ï¼Œåˆ™å¿…é¡»å‘å‡ºå¼‚æ­¥è¯·æ±‚æ‰èƒ½åˆ é™¤å®ƒã€‚ä¸€æ—¦è¿™ä¸ªæ“ä½œæˆåŠŸï¼ˆä¾‹å¦‚ï¼špromiseæ˜¯ resolvedæ—¶ï¼‰ï¼Œç”¨æˆ·å°±ä¼šè¢«å¯¼èˆªåˆ° /users è·¯ç”±ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ React ä¸­è®¾ç½®ä¸€ä¸ªè™šå‡çš„ API æ¥è‡ªå·±å°è¯•è¿™ä¸ªåœºæ™¯ï¼Œè€Œä¸ä½¿ç”¨å®é™…çš„æœåŠ¡å™¨ã€‚ æœç´¢å‚æ•° æµè§ˆå™¨ä¸­çš„ URL ä¸ä»…åŒ…å«è·¯å¾„ï¼Œè¿˜åŒ…å«ä¸€ä¸ªå¯é€‰çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåœ¨ React Router ä¸­ç§°ä¸ºæœç´¢å‚æ•°ï¼‰ï¼Œå®ƒä»¥é”®/å€¼å¯¹çš„å½¢å¼å‡ºç°åœ¨ ? URL ä¸­çš„åˆ†éš”ç¬¦ã€‚ä¾‹å¦‚ï¼Œ/users?name=robin å°†æ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸€å¯¹æœç´¢å‚æ•°çš„ URLï¼Œå…¶ä¸­é”®æ˜¯åç§°ï¼Œå€¼æ˜¯ robinã€‚ä»¥ä¸‹ç¤ºä¾‹å°†å…¶æ˜¾ç¤ºä¸ºå®ç°ï¼š import * as React from 'react'; import { ... useSearchParams, } from 'react-router-dom'; ... const Users = ({ users }) =&gt; { const [searchParams, setSearchParams] = useSearchParams(); const searchTerm = searchParams.get('name') || ''; const handleSearch = (event) =&gt; { const name = event.target.value; if (name) { setSearchParams({ name: event.target.value }); } else { setSearchParams({}); } }; return ( &lt;&gt; &lt;h2&gt;Users&lt;/h2&gt; &lt;input type=&quot;text&quot; value={searchTerm} onChange={handleSearch} /&gt; &lt;ul&gt; {users .filter((user) =&gt; user.fullName .toLowerCase() .includes(searchTerm.toLocaleLowerCase()) ) .map((user) =&gt; ( &lt;li key={user.id}&gt; &lt;Link to={user.id}&gt;{user.fullName}&lt;/Link&gt; &lt;/li&gt; ))} &lt;/ul&gt; &lt;Outlet /&gt; &lt;/&gt; ); }; é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ React Router çš„ useSearchParams Hook ä» URL ä¸­è¯»å–å½“å‰æœç´¢å‚æ•°ï¼ˆè¯·å‚é˜… searchParams ä¸Šçš„ get() æ–¹æ³•ï¼‰ï¼ŒåŒæ—¶è¿˜å°†æœç´¢å‚æ•°å†™å…¥ URLï¼ˆè¯·å‚é˜… setSearchParams() å‡½æ•°ï¼‰ã€‚è™½ç„¶æˆ‘ä»¬ä½¿ç”¨å‰è€…æŒ‰é”®è·å–æœç´¢å‚æ•°ï¼ˆæ­¤å¤„ï¼šâ€œnameâ€ï¼‰æ¥æ§åˆ¶è¾“å…¥å­—æ®µï¼Œä½†æˆ‘ä»¬ä½¿ç”¨åè€…åœ¨ URL ä¸­æŒ‰é”®è®¾ç½®æœç´¢å‚æ•°ã€‚åœ¨è¾“å…¥å­—æ®µä¸­é”®å…¥ã€‚åœ¨å…¶æ ¸å¿ƒï¼ŒReact Router çš„ useSearchParams Hook ä¸ React çš„ useState Hook ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºè¯¥çŠ¶æ€æ˜¯ URL çŠ¶æ€ï¼Œè€Œä¸æ˜¯ React ä¸­çš„æœ¬åœ°çŠ¶æ€ã€‚æœ€åæˆ‘ä»¬ä½¿ç”¨æœç´¢å‚æ•°æ¥è¿‡æ»¤ç”¨æˆ·çš„å®é™…åˆ—è¡¨ä»¥å®Œæˆæ­¤åŠŸèƒ½ã€‚ æ¯•ç«Ÿï¼Œåœ¨ä½ çš„ URL ä¸­åŒ…å«æœç´¢å‚æ•°å¯ä»¥è®©ä½ ä¸ä»–äººå…±äº«æ›´å…·ä½“çš„ URLã€‚å¦‚æœä½ åœ¨ä¸€ä¸ªæœç´¢é»‘è‰²é‹å­çš„ç”µå­å•†åŠ¡ç½‘ç«™ä¸Šï¼Œä½ å¯èƒ½å¸Œæœ›å…±äº«æ•´ä¸ª URLï¼ˆä¾‹å¦‚ myecommerce.com/shoes?color=blackï¼‰è€Œä¸ä»…ä»…æ˜¯è·¯å¾„ï¼ˆä¾‹å¦‚ myecommerce.com/shoesï¼‰ã€‚ æ€»ç»“ React Router æ˜¯ React æœ€å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“ä¹‹ä¸€ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å°† Link ç»„ä»¶æ˜ å°„åˆ° Route ç»„ä»¶ï¼Œè¿™ä½¿å¼€å‘äººå‘˜æ— éœ€å‘ Web æœåŠ¡å™¨å‘å‡ºè¯·æ±‚å³å¯å®ç°å®¢æˆ·ç«¯è·¯ç”±ã€‚ç„¶è€Œï¼Œé™¤äº†è¿™ä¸ªæ ¸å¿ƒåŠŸèƒ½ä¹‹å¤–ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªæˆç†Ÿçš„è·¯ç”±åº“ï¼Œå®ƒæ”¯æŒå£°æ˜å¼åµŒå¥—è·¯ç”±ã€åŠ¨æ€è·¯ç”±ã€å¯¼èˆªã€æ´»åŠ¨é“¾æ¥ï¼Œè¿˜å¯ä»¥é€šè¿‡ URL è¿›è¡Œç¼–ç¨‹å¯¼èˆªå’Œæœç´¢ã€‚ å‚è€ƒ react-router CRA ","link":"https://umeimmense.github.io/post/chu-tan-react-router-6"},{"title":"JavaScript å¼•æ“å¦‚ä½•æå‡å…¶è¿è¡Œæ—¶çš„æ€§èƒ½ï¼Ÿ","content":"å‰è¨€ JavaScript æ˜¯ä¸€é¡¹ä»¤äººå°è±¡æ·±åˆ»çš„æŠ€æœ¯ã€‚ä¸æ˜¯å› ä¸ºå®ƒè®¾è®¡å¾—ç‰¹åˆ«å¥½ï¼Œä¹Ÿä¸æ˜¯å› ä¸ºä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰å¯ä»¥è®¿é—®äº’è”ç½‘çš„è®¾å¤‡éƒ½æ‰§è¡Œ JavaScript ç¨‹åºã€‚ç›¸åï¼ŒJavaScript ä»¤äººå°è±¡æ·±åˆ»ï¼Œæ˜¯å› ä¸ºå®ƒçš„å‡ ä¹æ¯ä¸€ä¸ªç‰¹æ€§éƒ½ä½¿å®ƒæˆä¸ºä¼˜åŒ–çš„å™©æ¢¦ï¼Œä½†æ˜¯å®ƒé€Ÿåº¦å¾ˆå¿«ã€‚ javascript ä¸ºä»€ä¹ˆä¼šæ‰§è¡Œé€Ÿåº¦å¾ˆå¿«å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦å»æ·±å…¥æ¢ç©¶çš„é—®é¢˜ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»”ç»†ç ”ç©¶ä¸åŒ JavaScript å¼•æ“ç”¨äºå®ç°è‰¯å¥½è¿è¡Œæ—¶æ€§èƒ½çš„ä¸€äº›æŠ€æœ¯ï¼Œåœ¨ç ”ç©¶è¿‡ç¨‹ä¸­çœç•¥äº†ä¸€äº›ç»†èŠ‚ï¼Œå¹¶ç®€åŒ–äº†äº‹æƒ…ã€‚æœ¬æ–‡çš„ç›®æ ‡ä¸æ˜¯è®©æ‚¨äº†è§£äº‹ç‰©çš„ç¡®åˆ‡è¿ä½œæ–¹å¼ï¼Œè€Œæ˜¯è®©æ‚¨äº†è§£å¹¶ç†è§£å¼•æ“å¦‚ä½•æå‡å…¶è¿è¡Œæ—¶çš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ã€‚ æ‰§è¡Œæ¨¡å‹ å½“æ‚¨çš„æµè§ˆå™¨ä¸‹è½½ JavaScript æ—¶ï¼Œå…¶é¦–è¦ä»»åŠ¡æ˜¯è®©å®ƒå°½å¿«è¿è¡Œã€‚å®ƒé€šè¿‡å°†ä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç ã€è™šæ‹ŸæœºæŒ‡ä»¤ï¼Œç„¶åå°†å…¶ç§»äº¤ç»™ç†è§£å¦‚ä½•æ‰§è¡Œå®ƒä»¬çš„è§£é‡Šå™¨æˆ–è™šæ‹Ÿæœºæ¥å®ç°ã€‚ æ‚¨å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¼šå°† JavaScript è½¬æ¢ä¸ºè™šæ‹ŸæœºæŒ‡ä»¤è€Œä¸æ˜¯å®é™…çš„æœºå™¨æŒ‡ä»¤ï¼Ÿè¿™æ˜¯ä¸ªå¥½é—®é¢˜ã€‚äº‹å®ä¸Šï¼Œç›´åˆ°æœ€è¿‘ï¼ŒV8ï¼ˆChrome çš„ JavaScript å¼•æ“ï¼‰è¿˜ä¸€ç›´åœ¨åšç›´æ¥è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤çš„å·¥ä½œã€‚ ç‰¹å®šç¼–ç¨‹è¯­è¨€çš„è™šæ‹Ÿæœºé€šå¸¸æ˜¯æ›´å®¹æ˜“ç¼–è¯‘çš„ç›®æ ‡ï¼Œå› ä¸ºå®ƒä¸æºè¯­è¨€çš„å…³ç³»æ›´å¯†åˆ‡ã€‚å®é™…çš„æœºå™¨æœ‰ä¸€ä¸ªæ›´é€šç”¨çš„æŒ‡ä»¤é›†ï¼Œå› æ­¤éœ€è¦æ›´å¤šçš„å·¥ä½œæ¥ç¿»è¯‘ç¼–ç¨‹è¯­è¨€ä»¥å¾ˆå¥½åœ°å¤„ç†è¿™äº›æŒ‡ä»¤ã€‚è¿™ç§å›°éš¾æ„å‘³ç€ç¼–è¯‘éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼ŒåŒæ—¶ä¹Ÿæ„å‘³ç€ JavaScript å¼€å§‹æ‰§è¡Œéœ€è¦æ›´é•¿çš„æ—¶é—´ã€‚ ä¾‹å¦‚ï¼Œç†è§£ JavaScript çš„è™šæ‹Ÿæœºä¹Ÿå¯èƒ½ç†è§£ JavaScript å¯¹è±¡ã€‚å› æ­¤ï¼Œæ‰§è¡Œåƒ object.x è¿™æ ·çš„è¯­å¥æ‰€éœ€çš„è™šæ‹ŸæŒ‡ä»¤å¯èƒ½æ˜¯ä¸€ä¸¤æ¡æŒ‡ä»¤ã€‚ä¸€å°ä¸äº†è§£ JavaScript å¯¹è±¡å¦‚ä½•å·¥ä½œçš„å®é™…æœºå™¨éœ€è¦æ›´å¤šçš„æŒ‡ä»¤æ¥ç¡®å®š .x åœ¨å†…å­˜ä¸­çš„ä½ç½®ä»¥åŠå¦‚ä½•è·å–å®ƒã€‚ è™šæ‹Ÿæœºçš„é—®é¢˜åœ¨äºå®ƒæ˜¯è™šæ‹Ÿçš„, å®ƒæ˜¯ä¸å­˜åœ¨çš„ã€‚æŒ‡ä»¤ä¸èƒ½ç›´æ¥æ‰§è¡Œï¼Œå¿…é¡»åœ¨è¿è¡Œæ—¶è§£é‡Šã€‚è§£é‡Šä»£ç æ€»æ˜¯æ¯”ç›´æ¥æ‰§è¡Œä»£ç æ…¢ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æƒè¡¡ã€‚éœ€è¦åœ¨æ›´å¿«çš„ç¼–è¯‘æ—¶é—´ä¸æ›´å¿«çš„è¿è¡Œæ—¶é—´ä¸­åšä¸€ä¸ªé€‰æ‹©ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ›´å¿«çš„ç¼–è¯‘æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æƒè¡¡ã€‚ç”¨æˆ·ä¸å¤ªå¯èƒ½å…³å¿ƒå•ä¸ªæŒ‰é’®çš„ç‚¹å‡»æ˜¯å¦éœ€è¦ 20 æˆ– 40 æ¯«ç§’çš„æ‰§è¡Œæ—¶é—´ï¼Œå°¤å…¶æ˜¯å½“æŒ‰é’®åªè¢«æŒ‰ä¸‹ä¸€æ¬¡æ—¶ã€‚å¿«é€Ÿç¼–è¯‘ JavaScriptï¼Œå³ä½¿ç”Ÿæˆçš„ä»£ç æ‰§è¡Œé€Ÿåº¦è¾ƒæ…¢ï¼Œä¹Ÿä¼šè®©ç”¨æˆ·æ›´å¿«åœ°æŸ¥çœ‹é¡µé¢å¹¶ä¸é¡µé¢äº¤äº’ã€‚ æœ‰äº›æƒ…å†µåœ¨è®¡ç®—ä¸Šæ˜¯æ˜‚è´µçš„ã€‚è¯¸å¦‚æ¸¸æˆã€è¯­æ³•é«˜äº®ä¹‹ç±»çš„åœºæ™¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å’Œæ‰§è¡Œæœºå™¨æŒ‡ä»¤çš„æ—¶é—´åŠ èµ·æ¥å¯èƒ½ä¼šå‡å°‘æ€»æ‰§è¡Œæ—¶é—´ã€‚é‚£ä¹ˆ JavaScript æ˜¯å¦‚ä½•å¤„ç†è¿™äº›æƒ…å†µçš„å‘¢ï¼Ÿ ç»å¸¸è¢«æ‰§è¡Œçš„ä»£ç  æ¯å½“ JavaScript å¼•æ“æ£€æµ‹åˆ°æŸä¸ªå‡½æ•°æ‰§è¡Œäº†å¾ˆå¤šæ¬¡æ—¶ï¼Œå®ƒå°±ä¼šå°†è¯¥å‡½æ•°äº¤ç»™ä¼˜åŒ–ç¼–è¯‘å™¨ã€‚è¯¥ç¼–è¯‘å™¨å°†è™šæ‹ŸæœºæŒ‡ä»¤ç¿»è¯‘æˆå®é™…çš„æœºå™¨æŒ‡ä»¤ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œç”±äºè¯¥å‡½æ•°å·²ç»è¿è¡Œäº†å¤šæ¬¡ï¼Œä¼˜åŒ–ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®ä¹‹å‰çš„è¿è¡Œåšå‡ºä¸€äº›å‡è®¾ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå¯ä»¥æ‰§è¡Œæ¨æµ‹ä¼˜åŒ–ä»¥ç”Ÿæˆæ›´å¿«çš„ä»£ç ã€‚ å¦‚æœè¿™äº›æ¨æµ‹åæ¥è¢«è¯æ˜æ˜¯é”™è¯¯çš„ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ JavaScriptå¼•æ“å¯ä»¥ç®€å•åœ°åˆ é™¤é”™è¯¯çš„å‡½æ•°ï¼Œå¹¶è¿˜åŸä¸ºä½¿ç”¨æœªä¼˜åŒ–ç‰ˆæœ¬ã€‚ä¸€æ—¦è¯¥å‡½æ•°å†è¿è¡Œå‡ æ¬¡ï¼Œå®ƒå°±å¯ä»¥å°è¯•å†æ¬¡å°†å…¶ä¼ é€’ç»™ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œè¿™ä¸€æ¬¡å®ƒä¼šæä¾›æ›´å¤šå¯ç”¨äºæ¨æµ‹ä¼˜åŒ–çš„ä¿¡æ¯ã€‚ æ—¢ç„¶æˆ‘ä»¬çŸ¥é“é¢‘ç¹è¿è¡Œçš„å‡½æ•°åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ä½¿ç”¨æ¥è‡ªå…ˆå‰æ‰§è¡Œçš„ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥è¦æ¢ç´¢çš„æ˜¯è¿™æ˜¯ä»€ä¹ˆç±»å‹çš„ä¿¡æ¯ã€‚ ç¿»è¯‘é—®é¢˜ JavaScript ä¸­çš„å‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒJavaScript å¯¹è±¡å¾ˆéš¾è®©æœºå™¨å¤„ç†ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š function addFive(obj) { return obj.method() + 5;&lt;/code&gt; } å°†å‡½æ•°è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤éå¸¸ç®€å•ï¼Œå°±åƒä»å‡½æ•°è¿”å›ä¸€æ ·ã€‚ä½†æ˜¯æœºå™¨ä¸çŸ¥é“å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚è®¿é—®objçš„methodå±æ€§éœ€è¦æ€ä¹ˆç¿»è¯‘å‘¢ï¼Ÿ å¦‚æœçŸ¥é“ obj æ˜¯ä»€ä¹ˆæ ·å­ä¼šå¾ˆæœ‰å¸®åŠ©ï¼Œä½†åœ¨ JavaScript ä¸­æˆ‘ä»¬æ°¸è¿œæ— æ³•ç¡®å®šã€‚ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥æ·»åŠ æˆ–åˆ é™¤æ–¹æ³•å±æ€§ã€‚å³ä½¿methodç¡®å®å­˜åœ¨ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¹Ÿä¸èƒ½ç¡®å®šå®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ›´ä¸ç”¨è¯´è°ƒç”¨å®ƒä¹‹åçš„è¿”å›å€¼äº†ã€‚ è®©æˆ‘ä»¬å°è¯•å°†ä¸Šè¿°ä»£ç è½¬æ¢ä¸ºæ²¡æœ‰å¯¹è±¡çš„ JavaScript å­é›†ï¼Œæ¥äº†è§£è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤å¯èƒ½æ˜¯ä»€ä¹ˆæ ·çš„ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§è¡¨ç¤ºå¯¹è±¡çš„æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ç§ä»å…¶ä¸­æ£€ç´¢å€¼çš„æ–¹æ³•ã€‚åœ¨æœºå™¨ä»£ç ä¸­æ”¯æŒæ•°ç»„æ˜¯æ¯”è¾ƒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨è¿™æ ·çš„è¡¨ç¤ºï¼š // An object like { method: function() {} } // could be represented as: // [ [ &quot;method&quot; ], // property names // [ function() {} ] ] // property values function lookup(obj, name) { for (var i = 0; i &lt; obj[0].length; i++) { if (obj[0][i] === name) return i; } return -1; } å‚è€ƒä¸Šè¿°çš„è¡¨ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å¯¹ addFive è¿›è¡Œä¸€ä¸ªç®€å•çš„å®ç° function addFive(obj) { var propertyIndex = lookup(obj, &quot;method&quot;); var property = propertyIndex &lt; 0 ? undefined : obj[1][propertyIndex]; if (typeof(property) !== &quot;function&quot;) { throw NotAFunction(obj, &quot;method&quot;); } var callResult = property(/* this */ obj); return callResult + 5; } å½“ç„¶ï¼Œè¿™åœ¨ obj.method() è¿”å›çš„ä¸æ˜¯æ•°å­—çš„æƒ…å†µä¸‹ä¸èƒ½è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¨å¾®è°ƒæ•´ä¸€ä¸‹å®ç°ï¼š function addFive(obj) { var propertyIndex = lookup(obj, &quot;method&quot;); var property = propertyIndex &lt; 0 ? undefined : obj[1][propertyIndex]; if (typeof(property) !== &quot;function&quot;) { throw NotAFunction(obj, &quot;method&quot;); } var callResult = property(/* this */ obj); if (typeof(callResult) === &quot;string&quot;) { return stringConcat(callResult, &quot;5&quot;); } else if (typeof(callResult !== &quot;number&quot;) { throw NotANumber(callResult); } return callResult + 5; } è¿™æ˜¯èƒ½è¿è¡Œçš„ï¼Œä½†æˆ‘å¸Œæœ›å¾ˆæ˜æ˜¾ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æå‰çŸ¥é“ obj çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ–¹æ³•çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆè¿™æ®µä»£ç å¯ä»¥è·³è¿‡å‡ ä¸ªæ­¥éª¤ã€‚ éšè—ç±» ä¸»æµçš„ JavaScript å¼•æ“éƒ½ä»¥æŸç§æ–¹å¼è·Ÿè¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿåœ¨ Chrome ä¸­ï¼Œè¿™ä¸ªæ¦‚å¿µè¢«ç§°ä¸ºéšè—ç±»ã€‚ è®©æˆ‘ä»¬ä»ä»¥ä¸‹ä»£ç ç‰‡æ®µå¼€å§‹ï¼š var obj = {}; // empty object obj.x = 1; // shape has now changed to include a `x` property obj.toString = function() { return &quot;TODO&quot;; }; // shape changes delete obj.x; // shape changes again å¦‚æœæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°†å¦‚ä½•åœ¨æ·»åŠ å’Œåˆ é™¤æ–°å±æ€§æ—¶è·Ÿè¸ªå¯¹è±¡çš„æ ·å­ï¼Ÿå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸Šä¸€ä¸ªç¤ºä¾‹å°†å¯¹è±¡è¡¨ç¤ºä¸ºæ•°ç»„çš„æƒ³æ³•ï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š var emptyObj__Class = [ null, // No parent hidden class [], // Property names [] // Property types ]; var obj = [ emptyObj__Class, // Hidden class of `obj` [] // Property values ]; var obj_X__Class = [ emptyObj__Class, // Contains same properties as empty object [&quot;x&quot;], // As well as one property called `x` [&quot;number&quot;] // Where `x` is a number ]; obj[0] = obj_X__Class; // Shape changes obj[1].push(1); // value of `x` var obj_X_ToString__Class = [ obj_X__Class, // Contains same properties as previous shape [&quot;toString&quot;], // And one property called `toString` [&quot;function&quot;] // Where `toString` is a function ]; obj[0] = obj_X_ToString__Class; // shape change obj[1].push(function() { return &quot;TODO&quot;; }); // `toString` value var obj_ToString__Class = [ null, // Starting from scratch when deleting `x` [&quot;toString&quot;], [&quot;function&quot;] ]; obj[0] = obj_ToString__Class; obj[1] = [obj[1][1]]; å¦‚æœæˆ‘ä»¬è¦ç”Ÿæˆè¿™æ ·çš„è™šæ‹ŸæœºæŒ‡ä»¤ï¼Œæˆ‘ä»¬ç°åœ¨å°±æœ‰äº†ä¸€ç§æ–¹æ³•æ¥è·Ÿè¸ªå¯¹è±¡åœ¨ä»»ä½•ç»™å®šæ—¶é—´çš„æ ·å­ã€‚ç„¶è€Œï¼Œè¿™æœ¬èº«å¹¶ä¸èƒ½çœŸæ­£å¸®åŠ©æˆ‘ä»¬ã€‚æˆ‘ä»¬éœ€è¦å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨æœ‰ä»·å€¼çš„åœ°æ–¹ã€‚ å†…è”ç¼“å­˜ æ¯å½“ JavaScript ä»£ç å¯¹å¯¹è±¡æ‰§è¡Œå±æ€§è®¿é—®æ—¶ï¼ŒJavaScript å¼•æ“éƒ½ä¼šå°†è¯¥å¯¹è±¡çš„éšè—ç±»ä»¥åŠæŸ¥æ‰¾ç»“æœï¼ˆå±æ€§åç§°åˆ°ç´¢å¼•çš„æ˜ å°„ï¼‰å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚è¿™äº›ç¼“å­˜è¢«ç§°ä¸ºå†…è”ç¼“å­˜ï¼Œå®ƒä»¬æœ‰ä¸¤ä¸ªé‡è¦ç›®çš„ï¼š åœ¨æ‰§è¡Œå­—èŠ‚ç æ—¶ï¼Œå¦‚æœæ‰€æ¶‰åŠçš„å¯¹è±¡å…·æœ‰ç¼“å­˜ä¸­çš„éšè—ç±»ï¼Œå®ƒä»¬ä¼šåŠ é€Ÿå±æ€§è®¿é—®ã€‚ åœ¨ä¼˜åŒ–æœŸé—´ï¼Œå®ƒä»¬åŒ…å«æœ‰å…³è®¿é—®å¯¹è±¡å±æ€§æ—¶æ‰€æ¶‰åŠçš„å¯¹è±¡ç±»å‹çš„ä¿¡æ¯ï¼Œè¿™æœ‰åŠ©äºä¼˜åŒ–ç¼–è¯‘å™¨ç”Ÿæˆç‰¹åˆ«é€‚åˆè¿™äº›ç±»å‹çš„ä»£ç ã€‚ å†…è”ç¼“å­˜å¯¹å®ƒä»¬å­˜å‚¨ä¿¡æ¯çš„éšè—ç±»çš„æ•°é‡æœ‰é™åˆ¶ã€‚è¿™å¯ä»¥ä¿ç•™å†…å­˜ï¼Œä½†ä¹Ÿç¡®ä¿åœ¨ç¼“å­˜ä¸­æ‰§è¡ŒæŸ¥æ‰¾é€Ÿåº¦å¾ˆå¿«ã€‚å¦‚æœä»å†…è”ç¼“å­˜ä¸­æ£€ç´¢ç´¢å¼•æ¯”ä»éšè—ç±»ä¸­æ£€ç´¢ç´¢å¼•èŠ±è´¹çš„æ—¶é—´æ›´é•¿ï¼Œåˆ™ç¼“å­˜æ²¡æœ‰ä»»ä½•ç”¨å¤„ã€‚ æ®æˆ‘æ‰€çŸ¥ï¼Œ Chromeåœ¨ä¸­ï¼Œå†…è”ç¼“å­˜æœ€å¤šä¼šè·Ÿè¸ª 4 ä¸ªéšè—ç±»ã€‚åœ¨æ­¤ä¹‹åï¼Œå†…è”ç¼“å­˜å°†è¢«ç¦ç”¨ï¼Œä¿¡æ¯å°†å­˜å‚¨åœ¨å…¨å±€ç¼“å­˜ä¸­ã€‚å…¨å±€ç¼“å­˜çš„å¤§å°ä¹Ÿæœ‰é™åˆ¶ï¼Œä¸€æ—¦è¾¾åˆ°é™åˆ¶ï¼Œæ–°æ¡ç›®å°†è¦†ç›–æ—§æ¡ç›®ã€‚ ä¸ºäº†æœ€å¥½åœ°åˆ©ç”¨å†…è”ç¼“å­˜å¹¶å¸®åŠ©ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œåº”è¯¥å°è¯•ç¼–å†™ä»…å¯¹å•ä¸€ç±»å‹çš„å¯¹è±¡æ‰§è¡Œå±æ€§è®¿é—®çš„å‡½æ•°ã€‚ä¸ä»…å¦‚æ­¤ï¼Œç”Ÿæˆçš„ä»£ç çš„æ€§èƒ½å°†æ˜¯æ¬¡ä¼˜çš„ å†…è” ä¸€ç§å•ç‹¬ä¸”é‡è¦çš„ä¼˜åŒ–æ˜¯å†…è”ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™ç§ä¼˜åŒ–ç”¨è¢«è°ƒç”¨å‡½æ•°çš„å®ç°ä»£æ›¿äº†å‡½æ•°è°ƒç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼š function map(fn, list) { var newList = []; for (var i = 0; i &lt; list.length; i++) { newList.push(fn(list[i])); } return newList; } function incrementNumbers(list) { return map(function(n) { return n + 1; }, list); } incrementNumbers([1, 2, 3]); // returns [2, 3, 4] å†…è”åï¼Œä»£ç æœ€ç»ˆå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š function incrementNumbers(list) { var newList = []; var fn = function(n) { return n + 1; }; for (var i = 0; i &lt; list.length; i++) { newList.push(fn(list[i])); } return newList; } incrementNumbers([1, 2, 3]); // returns [2, 3, 4] è¿™æ ·åšçš„ä¸€ä¸ªå¥½å¤„æ˜¯åˆ é™¤äº†å‡½æ•°è°ƒç”¨ã€‚æ›´å¤§çš„å¥½å¤„æ˜¯ JavaScript å¼•æ“ç°åœ¨å¯ä»¥æ›´æ·±å…¥åœ°äº†è§£å‡½æ•°çš„å®é™…ä½œç”¨ã€‚åŸºäºè¿™ä¸ªæ–°ç‰ˆæœ¬ï¼ŒJavaScript å¼•æ“å¯èƒ½ä¼šå†³å®šå†æ¬¡æ‰§è¡Œå†…è”ï¼š function incrementNumbers(list) { var newList = []; for (var i = 0; i &lt; list.length; i++) { newList.push(list[i] + 1); } return newList; } incrementNumbers([1, 2, 3]); // returns [2, 3, 4] å¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨å·²è¢«åˆ é™¤ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä¼˜åŒ–å™¨ç°åœ¨å¯èƒ½ä¼šæ¨æµ‹ incrementNumbers åªä¼šä»¥æ•°å­—åˆ—è¡¨ä½œä¸ºå‚æ•°è¢«è°ƒç”¨ã€‚å®ƒè¿˜å¯èƒ½å†³å®šå†…è” incrementNumbers([1, 2, 3]) è°ƒç”¨æœ¬èº«ï¼Œå¹¶å‘ç° list.length ä¸º 3ï¼Œè¿™åˆå¯èƒ½å¯¼è‡´ï¼š var list = [1, 2, 3]; var newList = []; newList.push(list[0] + 1); newList.push(list[1] + 1); newList.push(list[2] + 1); list = newList; ç®€è€Œè¨€ä¹‹ï¼Œå†…è”å¯ä»¥å®ç°è·¨å‡½æ•°è¾¹ç•Œæ— æ³•æ‰§è¡Œçš„ä¼˜åŒ–ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥å†…è”çš„å†…å®¹æ˜¯æœ‰é™çš„ã€‚ç”±äºä»£ç é‡å¤ï¼Œå†…è”ä¼šå¯¼è‡´æ›´å¤§çš„å‡½æ•°ï¼Œè¿™éœ€è¦é¢å¤–çš„å†…å­˜ã€‚ JavaScript å¼•æ“å¯¹ä¸€ä¸ªå‡½æ•°åœ¨å®Œå…¨è·³è¿‡å†…è”ä¹‹å‰å¯ä»¥è¾¾åˆ°çš„å¤§å°æœ‰ä¸€ä¸ªé¢„ç®—ã€‚ ä¸€äº›å‡½æ•°è°ƒç”¨ä¹Ÿå¾ˆéš¾å†…è”ã€‚ç‰¹åˆ«æ˜¯å½“ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥æ—¶ã€‚ æ­¤å¤–ï¼Œä½œä¸ºå‚æ•°ä¼ é€’çš„å‡½æ•°å¾ˆéš¾å†…è”ï¼Œé™¤éå®ƒæ€»æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚è™½ç„¶è¿™å¯èƒ½ä¼šè®©æ‚¨è§‰å¾—è¿™æ˜¯ä¸€ä»¶å¥‡æ€ªçš„äº‹æƒ…ï¼Œä½†ç”±äºå†…è”ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ ç»“è®º JavaScript å¼•æ“æœ‰è®¸å¤šæé«˜è¿è¡Œæ—¶æ€§èƒ½çš„æŠ€å·§ï¼Œæ¯”è¿™é‡Œä»‹ç»çš„è¦å¤šå¾—å¤šã€‚ä½†æ˜¯ï¼Œæœ¬æ–‡ä¸­æè¿°çš„ä¼˜åŒ–é€‚ç”¨äºå¤§å¤šæ•°æµè§ˆå™¨ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“éªŒè¯å®ƒä»¬æ˜¯å¦è¢«åº”ç”¨ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬å°è¯•æé«˜ Elm çš„è¿è¡Œæ—¶æ€§èƒ½æ—¶ï¼Œæˆ‘ä»¬å°†ä¸»è¦å…³æ³¨è¿™äº›ä¼˜åŒ–ã€‚ å‚è€ƒ Whatâ€™s up with monomorphism Shapes and inline caches Optimizing prototypes ","link":"https://umeimmense.github.io/post/javascript-yin-qing-ru-he-ti-sheng-qi-yun-xing-shi-de-xing-neng"},{"title":"7 ä¸ªå¯èƒ½éœ€è¦çš„è‡ªå®šä¹‰ React Hook","content":"å‰è¨€ æœ¬æ–‡ä¸»è¦ç¼–åˆ¶äº†ä¸€ä»½æ¸…å•ï¼Œåˆ—å‡ºäº†åœ¨é¡¹ç›®ä¸­å¯èƒ½ä¼šéœ€è¦ç”¨åˆ°çš„çš„ä¸ƒä¸ªHooksã€‚ 1. useToggle è¿™ä¸ªhookå¾ˆå¸¸è§ï¼Œå®ƒç”¨äºåœ¨ true å’Œ false ä¹‹é—´åˆ‡æ¢å¸ƒå°”å€¼ã€‚å½“æˆ‘ä»¬æƒ³è¦æ˜¾ç¤º/éšè—æ¨¡å¼æˆ–æ‰“å¼€/å…³é—­ä¾§è¾¹èœå•æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚è¿™ä¸ªhookçš„åŸºæœ¬ç‰ˆæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š å®ç°v1 // useToggle.jsx import { useState, useCallback } from 'react'; const useToggle = (initialValue = false) =&gt; { const [state, setState] = useState(initialValue); const toggle = useCallback(() =&gt; { setState((state) =&gt; !state); }, []); return [state, toggle]; }; export default useToggle; æ¡ˆä¾‹1 import useToggle from './useToggle'; const App = () =&gt; { const [show, toggleShow] = useToggle(); return ( &lt;Modal show={show} onClose={toggleShow}&gt; &lt;h1&gt;Hello there&lt;/h1&gt; &lt;/Modal&gt; ); } å½“æˆ‘ä»¬æƒ³è¦æ˜¾ç¤º/éšè—è¡¨ä¸­ä¸€è¡Œçš„æ¨¡å¼æ—¶ï¼Œå¯ä»¥ç¨å¾®ä¿®æ”¹æ­¤hookä»¥ç”¨äºç”¨ä¾‹ã€‚æˆ‘æ·»åŠ äº†ä¸€ä¸ª customToggle æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å€¼è®¾ç½®ä¸ºç»™å®šå€¼ï¼Œè€Œä¸æ˜¯åˆ‡æ¢å…ˆå‰çš„çŠ¶æ€å€¼ã€‚ å®ç°v2 // useToggle.jsx modified import { useState, useCallback } from 'react'; const useToggle = (initialValue = false) =&gt; { const [state, setState] = useState(initialValue); const toggle = useCallback(() =&gt; { setState((state) =&gt; !state); }, []); const customToggle = useCallback((value) =&gt; { setState(value); }, []); return [state, toggle, customToggle]; }; export default useToggle; æ¡ˆä¾‹2 å‡è®¾æˆ‘ä»¬åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­æœ‰ä¸€å †è¡Œï¼Œæˆ‘ä»¬æƒ³æä¾›ä¸€ä¸ªåˆ é™¤è¡Œçš„é€‰é¡¹ã€‚å•å‡»åˆ é™¤æŒ‰é’®åº”æ‰“å¼€ä¸€ä¸ªç¡®è®¤æ¨¡å¼ã€‚ å¯¹äºè¿™ç§ç±»å‹çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦çŠ¶æ€ä¸­çš„ä¸¤ä¸ªå˜é‡ã€‚é¦–å…ˆï¼Œä¿å­˜ä¸€ä¸ªå¸ƒå°”å€¼æ¥ç¡®å®šæ˜¯å¦æ˜¾ç¤ºåˆ é™¤ç¡®è®¤æ¨¡å¼ï¼Œå…¶æ¬¡ä¿å­˜å¿…é¡»æ˜¾ç¤ºåˆ é™¤æ¨¡å¼çš„è¡Œ IDã€‚ ä½¿ç”¨è¿™ä¸ªhookï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡æ¥å®Œæˆã€‚è¿™æ˜¯å¦‚ä½•åšåˆ°çš„ï¼š import useToggle from './useToggle'; // initial data const rows = [ { id: 1, name: 'John' }, { id: 2, name: 'Doe' } ]; const App = () =&gt; { // using hook const [delModal, toggleDelModal, setDelModalCustom] = useToggle(); return ( &lt;div&gt; &lt;table&gt; {rows.map(row =&gt; ( &lt;tr&gt; &lt;td&gt;{row.id}&lt;/td&gt; &lt;td&gt;{row.name}&lt;/td&gt; &lt;td onClick={() =&gt; setDelModalCustom(row.id)}&gt;Delete&lt;/td&gt; &lt;/tr&gt; ))} &lt;/table&gt; &lt;DeleteModal show={Boolean(delModal)} onClose={toggleDelModal} itemToDelete={delModal} // it will hold the current row id &gt; &lt;h1&gt; Are you sure you want to delete row with id {delModal} &lt;/h1&gt; &lt;/DeleteModal&gt; &lt;/div&gt; ); } 2. usePageBottom ä½¿ç”¨æ­¤hookï¼Œæ‚¨å¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦å·²æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ã€‚éå¸¸é€‚åˆæ— é™æ»šåŠ¨çš„åº”ç”¨ç¨‹åºï¼Œå½“ç”¨æˆ·æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨æ—¶ï¼Œæ‚¨éœ€è¦è·å–æ›´å¤šæ•°æ®ã€‚ // usePageBottom.jsx import { useState, useEffect } from 'react'; const usePageBottom = () =&gt; { const [reachedBottom, setReachedBottom] = useState(false); // event handler for determining if the user reached bottom const handleScroll = () =&gt; { const offsetHeight = document.documentElement.offsetHeight; const innerHeight = window.innerHeight; const scrollTop = document.documentElement.scrollTop; // if current scroll from bottom is less than equal to 10px const reachingBottom = offsetHeight - (innerHeight + scrollTop) &lt;= 10; setReachedBottom(reachingBottom); }; // effect for binding event listener on window scroll useEffect(() =&gt; { window.addEventListener('scroll', handleScroll); return () =&gt; { window.removeEventListener('scroll', handleScroll); }; }, [handleScroll]); return reachedBottom; } æ¡ˆä¾‹ import usePageBottom from './usePageBottom'; const App = (props) =&gt; { // hook usage const scrolledBottom = usePageBottom(); return ( &lt;div className=&quot;App&quot; style={{ height: '150vh' }}&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;p&gt;Scrolled to bottom {scrolledBottom}&lt;/p&gt; &lt;/div&gt; ); } èŠ‚æµç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰ å‡å°‘åƒçª—å£æ»šåŠ¨äº‹ä»¶è¿™æ ·å¤šæ¬¡è§¦å‘çš„äº‹ä»¶çš„é€šçŸ¥æ˜¯æœ€ä½³å®è·µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŠ‚æµè®¾ç½®äº‹ä»¶ä¾¦å¬å™¨ã€‚æˆ‘æ­£åœ¨ä½¿ç”¨ lodash çš„throttleï¼›ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å»debounceã€‚ // usePageBottom with throttle import { useState, useEffect, useMemo } from 'react'; import { throttle } from 'lodash'; const usePageBottom = () =&gt; { const [reachedBottom, setReachedBottom] = useState(false); // event handler for determining if the user reached bottom const handleScroll = useMemo(() =&gt; { return throttle(() =&gt; { const offsetHeight = document.documentElement.offsetHeight; const innerHeight = window.innerHeight; const scrollTop = document.documentElement.scrollTop; // if current scroll from bottom is less than equal to 10px const reachingBottom = offsetHeight - (innerHeight + scrollTop) &lt;= 10; setReachedBottom(reachingBottom); }, 1000); }, []); // effect for binding event listener on window scroll useEffect(() =&gt; { window.addEventListener('scroll', handleScroll); return () =&gt; { window.removeEventListener('scroll', handleScroll); }; }, [handleScroll]); return reachedBottom; } 3. useElementBottom å°±åƒé¡µé¢åº•éƒ¨ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦å·²ç»æ»šåŠ¨åˆ°å…ƒç´ çš„åº•éƒ¨ã€‚åœ¨è¿™ä¸ªhookä¸­ï¼Œä¼ é€’äº†å¯¹å…ƒç´ çš„å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…ƒç´ çš„é«˜åº¦å’Œå½“å‰æ»šåŠ¨ä½ç½®æ¥ç¡®å®šå…ƒç´ æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨ã€‚ // useElementBottom.jsx import { useState, useEffect, useMemo } from 'react'; import { throttle } from 'lodash'; const useElementBottom = (element) =&gt; { const [reachedBottom, setReachedBottom] = useState(false); // event handler for determining if the user reached bottom const handleScroll = useMemo(() =&gt; { return throttle(() =&gt; { const { current } = element; // current holds the reference to element // if current scroll from bottom is less than equal to 10px const scrollBottom = current.scrollHeight - current.scrollTop - current.clientHeight; const reachingBottom = scrollBottom &lt;= 10; setReachedBottom(reachingBottom); }, 1000); }, []); // effect for binding event listener on element scroll useEffect(() =&gt; { const { current } = element; current.addEventListener('scroll', handleScroll); return () =&gt; current.removeEventListener('scroll', handleScroll); }, []); return reachedBottom; }; export default useElementBottom; æ¡ˆä¾‹ import useElementBottom from './useElementBottom'; const App = (props) =&gt; { const element = useRef(); // hook usage const scrolledBottom = useElementBottom(element); return ( &lt;div ref={element} style={{ height: '150vh' }}&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;p&gt;Scrolled to bottom {scrolledBottom}&lt;/p&gt; &lt;/div&gt; ); } 4. usePrevious æˆ‘ä»¬å¯ä»¥åˆ¶ä½œä¸€ä¸ªè‡ªå®šä¹‰hookæ¥è·å– prop æˆ– state çš„å…ˆå‰å€¼ã€‚ä½¿ç”¨ React ç±»ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ componentDidUpdate ç”Ÿå‘½å‘¨æœŸæ¥è·å–ä¹‹å‰çš„ prop å’Œ state å€¼ã€‚å¯¹äºåŠŸèƒ½ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰hookæ¥å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š // usePrevious.jsx import { useEffect, useRef } from 'react'; const usePrevious = (value) =&gt; { const ref = useRef(); // store current value in ref useEffect(() =&gt; { ref.current = value; }, [value]); // return previous value (happens before update in useEffect above) return ref.current; }; export default usePrevious; æˆ‘ä»¬ä½¿ç”¨ useRef hookæ¥å­˜å‚¨å…ˆå‰çš„å€¼ã€‚æˆ‘ä»¬çš„hookåœ¨ useEffect ä¸­æ›´æ–°å¼•ç”¨å¯¹è±¡ä¹‹å‰è¿”å›å…ˆå‰çš„å€¼ã€‚ import usePrevious from './usePrevious'; const App = () =&gt; { const [count, setCount] = useState(0); const prevCount = usePrevious(count); return ( &lt;div&gt; &lt;h1&gt;Now: {count}, before: {prevCount}&lt;/h1&gt; &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt; &lt;/div&gt; ); } 5. useWindowSize è¿™ä¸ªhookè¿”å›çª—å£çš„å®½åº¦å’Œé«˜åº¦ã€‚æˆ‘ä»¬åœ¨è°ƒæ•´çª—å£å¤§å°æ—¶è®¾ç½®äº†ä¸€ä¸ªå—é™åˆ¶çš„ set äº‹ä»¶ä¾¦å¬å™¨ï¼Œä»¥ä¾¿æˆ‘ä»¬æ¯æ¬¡éƒ½èƒ½è·å¾—æ­£ç¡®çš„å®½åº¦å’Œé«˜åº¦ã€‚ // useWindowSize import { useState, useEffect, useCallback } from 'react'; import { throttle } from 'throttle'; const useWindowSize = () =&gt; { const [size, setSize] = useState({ innerWidth: window.innerWidth, innerHeight: window.innerHeight, }); // throttled set listener that runs on window resize const throttledSetResizeListner = useCallback( throttle(() =&gt; { // set size in state setSize({ innerWidth: window.innerWidth, innerHeight: window.innerHeight, }); }, 1000), [] ); // effect for binding resize event on window useEffect(() =&gt; { // add throtelled set window resize event listener window.addEventListener('resize', throttledSetResizeListner); // remove throttled set window resize event listener return () =&gt; window.removeEventListener('resize', throttledSetResizeListner); }, [throttledSetResizeListner]); return size; }; export default useWindowSize; æ¡ˆä¾‹ å½“ä½ æƒ³æ ¹æ®çª—å£çš„å®½åº¦æˆ–é«˜åº¦åœ¨ä½ çš„ JS ä»£ç ä¸­åšä¸€äº›äº‹æƒ…æ—¶ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚ import useWindowSize from './useWindowSize'; const App = () =&gt; { const { innerWidth, innerHeight } = useWindowSize(); return ( &lt;div&gt; {innerWidth &lt;= 768 ? 'I am on small screen' : 'I am on large screen'} &lt;/div&gt; ); } 6. useEventListener ä½¿ç”¨æ­¤hookå¯ä»¥è½»æ¾åœ°å°†äº‹ä»¶ä¾¦å¬å™¨ç»‘å®šåˆ°çª—å£æˆ–çª—å£å…ƒç´ ã€‚åœ¨hookçš„effectä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥å…ƒç´ æ˜¯å¦æ˜¯æ¥è‡ª useRef çš„å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å°†äº‹ä»¶ä¾¦å¬å™¨æ·»åŠ åˆ°å…¨å±€çª—å£å¯¹è±¡ã€‚ import { useEffect } from 'react'; const useEventListener = (event, handler, referencedElement) =&gt; { // effect for binding event handler to the element useEffect(() =&gt; { const element = referencedElement?.current || window; const isSupported = element &amp;&amp; element.addEventListener; if (!isSupported) return; // bind event to the element element.addEventListener(event, handler); return () =&gt; element.removeEventListener(event, handler); }, [referencedElement, event, handler]); return; }; export default useEventListener; import useEventListener from './useEventListener'; const App = (props) =&gt; { const element = useRef(); useEventListener('mouseover', handler, element); const handler =&gt; () =&gt; { console.log('Event triggered'); } return ( &lt;div ref={element}&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;div&gt; ); } æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„hookå°†äº‹ä»¶æ·»åŠ åˆ°çª—å£ import useEventListener from './useEventListener'; const App = (props) =&gt; { // adding event listener on window scroll useEventListener('scroll', handler); const handler =&gt; () =&gt; { console.log('Event triggered'); } return ( &lt;div&gt; &lt;h1&gt;This is app&lt;/h1&gt; &lt;div&gt; ); } 7. useLocalStorageState æœ‰æ—¶ï¼Œå¯èƒ½éœ€è¦åœ¨æœ¬åœ°å­˜å‚¨å’ŒçŠ¶æ€ä¹‹é—´åŒæ­¥ä¸€ä¸ªå€¼ã€‚è¿™ä¸ªhookçš„ä½œç”¨å®Œå…¨ä¸€æ ·ã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ useState å¹¶æ£€æŸ¥æŒ‡å®šçš„é”®æ˜¯å¦åœ¨æœ¬åœ°å­˜å‚¨ä¸­å…·æœ‰æŸä¸ªå€¼ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨ä½œåˆå§‹å€¼ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨é¡µé¢åˆ·æ–°æ—¶ä¿æŒå€¼ä¸çŠ¶æ€åŒæ­¥ã€‚ // useLocalStorageState import { useState, useEffect } from 'react'; const useLocalStorageState = (key, defaultValue) =&gt; { const [value, setValue] = useState(() =&gt; { let val; try { // if there is a value in local storage for given key, set it as initial state val = JSON.parse(localStorage.getItem(key) || String(defaultValue)); } catch (error) { // otherwise, set default value as initial state val = defaultValue; } return val; }); // effect to update local storage when state changes useEffect(() =&gt; { localStorage.setItem(key, JSON.stringify(value)); }, [value]); return [value, setValue]; }; export default useLocalStorageState; å½“å€¼æ›´æ–°æ—¶ï¼Œä¼šè¿è¡Œä¸€ä¸ªeffect ï¼Œæ›´æ–°æœ¬åœ°å­˜å‚¨ä¸­çš„å€¼ã€‚ æ¡ˆä¾‹ å‡è®¾ä½ æƒ³åœ¨æœ¬åœ°å­˜å‚¨ä¸­å­˜å‚¨ç”¨æˆ·ä¸»é¢˜é¦–é€‰é¡¹ import useLocalStorageState from './useLocalStorageState'; const App = (props) =&gt; { // setting default theme to light const [theme, setTheme] = useLocalStorageState('theme', 'light'); return ( &lt;div&gt; &lt;p&gt;Current theme is {theme}&lt;/p&gt; &lt;button onClick={() =&gt; setTheme('dark')}&gt; Change theme to dark &lt;/button&gt; &lt;/div&gt; ); } å½“ä½ ç‚¹å‡»æ›´æ”¹ä¸»é¢˜æŒ‰é’®æ—¶ï¼ŒçŠ¶æ€å’Œæœ¬åœ°å­˜å‚¨ä¸­çš„å€¼éƒ½ä¼šæ›´æ–°ã€‚é¡µé¢åˆ·æ–°åï¼Œä½ å°†è·å¾—å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨ä¸­çš„æœ€åä¸€ä¸ªå€¼ã€‚ ç»“è¯­ æ„Ÿè°¢ä½ é˜…è¯»åˆ°æœ€åã€‚æˆ‘å¸Œæœ›è¿™äº›è‡ªå®šä¹‰hookå¯¹ä½ æœ‰ç”¨ã€‚ ","link":"https://umeimmense.github.io/post/ke-neng-xu-yao-de-7-ge-zi-ding-yi-react-hook"},{"title":"10ä¸ªå¸¸ç”¨çš„JavaScriptä½¿ç”¨æŠ€å·§","content":"å‰è¨€ ç¼–å†™ç®€çŸ­ã€ç®€æ´å’Œå¹²å‡€çš„ JavaScript ä»£ç çš„æŠ€å·§ğŸ˜ JavaScript æœ‰å¾ˆå¤šå¾ˆé…·çš„ç‰¹æ€§ï¼Œå¤§å¤šæ•°åˆå­¦è€…å’Œä¸­çº§å¼€å‘äººå‘˜éƒ½ä¸çŸ¥é“ã€‚æˆ‘æŒ‘é€‰äº† 10 ä¸ªæˆ‘åœ¨æ—¥å¸¸ JavaScript é¡¹ç›®ä¸­ä½¿ç”¨çš„æŠ€å·§ã€‚ 1. æœ‰æ¡ä»¶çš„å‘å¯¹è±¡ä¸­æ·»åŠ å±æ€§ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ ... æ¥æœ‰æ¡ä»¶åœ°å‘ JavaScript å¯¹è±¡å¿«é€Ÿæ·»åŠ å±æ€§ã€‚ const condition = true; const person = { id: 1, name: 'John Doe', ...(condition &amp;&amp; { age: 16 }), }; å¦‚æœæ¯ä¸ªæ“ä½œæ•°çš„è®¡ç®—ç»“æœéƒ½ä¸ºtrueï¼Œ &amp;&amp; è¿ç®—ç¬¦å°†è¿”å›æœ€åè®¡ç®—çš„è¡¨è¾¾å¼ã€‚å› æ­¤è¿”å›ä¸€ä¸ªå¯¹è±¡ { age: 16 }ï¼Œç„¶åå°†å…¶ä½œä¸º person å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚ å¦‚æœæ¡ä»¶ä¸º falseï¼Œåˆ™ JavaScript å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š const person = { id: 1, name: 'John Doe', ...(false), // evaluates to false }; // spreading false has no effect on the object console.log(person); // { id: 1, name: 'John Doe' } 2. æ£€æŸ¥ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªå¯¹è±¡ä¸­ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨inå…³é”®å­—æ¥æ£€æŸ¥ JavaScript å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨å±æ€§ const person = { name: 'John Doe', salary: 1000 }; console.log('salary' in person); // returns true console.log('age' in person); // returns false 3. å¯¹è±¡ä¸­çš„åŠ¨æ€å±æ€§åç§° ä½¿ç”¨åŠ¨æ€é”®è®¾ç½®å¯¹è±¡å±æ€§å¾ˆç®€å•ã€‚åªéœ€ä½¿ç”¨ ['key_name'] ç¬¦å·æ·»åŠ å±æ€§ const dynamic = 'flavour'; var item = { name: 'Biscuit', [dynamic]: 'Chocolate' } console.log(item); // { name: 'Biscuit', flavour: 'Chocolate' } åŒæ ·çš„æŠ€å·§ä¹Ÿå¯ç”¨äºä½¿ç”¨åŠ¨æ€é”®å¼•ç”¨å¯¹è±¡å±æ€§ï¼š const keyName = 'name'; console.log(item[keyName]); // returns 'Biscuit' 4. ä½¿ç”¨åŠ¨æ€é”®è¿›è¡Œå¯¹è±¡è§£æ„ ä½ å¯èƒ½çŸ¥é“ä½ å¯ä»¥è§£æ„ä¸€ä¸ªå˜é‡å¹¶ç«‹å³ç”¨ : ç¬¦å·é‡å‘½åå®ƒã€‚ä½†æ˜¯ä½ çŸ¥é“å½“ä½ ä¸çŸ¥é“é”®åæˆ–é”®åæ˜¯åŠ¨æ€çš„æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥è§£æ„å¯¹è±¡çš„å±æ€§å—ï¼Ÿ é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨è§£æ„ï¼ˆç”¨åˆ«åè§£æ„ï¼‰æ—¶é‡å‘½åå˜é‡ã€‚ const person = { id: 1, name: 'John Doe' }; const { name: personName } = person; console.log(personName); // returns 'John Doe' ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€é”®æ¥è§£æ„å±æ€§ï¼š const templates = { 'hello': 'Hello there', 'bye': 'Good bye' }; const templateName = 'bye'; const { [templateName]: template } = templates; console.log(template) // returns 'Good bye' 5. ?? è¿ç®—ç¬¦ è¿™ ??å½“ä½ è¦æ£€æŸ¥å˜é‡æ˜¯ null è¿˜æ˜¯ undefined æ—¶ï¼Œè¿ç®—ç¬¦å¾ˆæœ‰ç”¨ã€‚å½“å…¶å·¦ä¾§æ“ä½œæ•°ä¸ºç©ºæˆ–æœªå®šä¹‰æ—¶ï¼Œå®ƒè¿”å›å³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å…¶å·¦ä¾§æ“ä½œæ•°ã€‚ const foo = null ?? 'Hello'; console.log(foo); // returns 'Hello' const bar = 'Not null' ?? 'Hello'; console.log(bar); // returns 'Not null' const baz = 0 ?? 'Hello'; console.log(baz); // returns 0 åœ¨ç¬¬ä¸‰ä¸ªç¤ºä¾‹ä¸­ï¼Œè¿”å› 0 æ˜¯å› ä¸ºå³ä½¿ 0 åœ¨ JavaScript ä¸­è¢«è®¤ä¸ºæ˜¯å‡çš„ï¼Œä½†å®ƒä¸æ˜¯ null æˆ–æœªå®šä¹‰çš„ã€‚ä½ å¯èƒ½è®¤ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ||è¿ç®—ç¬¦åœ¨è¿™é‡Œï¼Œä½†è¿™ä¸¤è€…ä¹‹é—´å­˜åœ¨å·®å¼‚ï¼š const cannotBeZero = 0 || 5; console.log(cannotBeZero); // returns 5 const canBeZero = 0 ?? 5; console.log(canBeZero); // returns 0 6. ?. å¯é€‰é“¾ æˆ‘ä»¬éƒ½å¯èƒ½æ›¾ç»é‡åˆ°è¿‡TypeErrorï¼šæ— æ³•è¯»å– null çš„å±æ€§â€œfooâ€ä¹‹ç±»çš„é”™è¯¯ã€‚è¿™å¯¹æ¯ä¸ª JavaSript å¼€å‘äººå‘˜æ¥è¯´éƒ½æ˜¯å¤´ç–¼çš„é—®é¢˜ã€‚å¼•å…¥äº†å¯é€‰é“¾å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼š const book = { id:1, title: 'Title', author: null }; // normally, you would do this console.log(book.author.age) // throws error console.log(book.author &amp;&amp; book.author.age); // returns null (no error) // with optional chaining console.log(book.author?.age); // returns undefined // or deep optional chaining console.log(book.author?.address?.city); // returns undefined ä½ è¿˜å¯ä»¥ä½¿ç”¨å…·æœ‰ä»¥ä¸‹åŠŸèƒ½çš„å¯é€‰é“¾ï¼š const person = { firstName: 'Haseeb', lastName: 'Anwar', printName: function () { return `${this.firstName} ${this.lastName}`; }, }; console.log(person.printName()); // returns 'Haseeb Anwar' console.log(persone.doesNotExist?.()); // returns undefined 7. ä½¿ç”¨ !! çš„å¸ƒå°”è½¬æ¢ç¬¦ è¿™ !!è¿ç®—ç¬¦å¯ç”¨äºå°†è¡¨è¾¾å¼çš„ç»“æœå¿«é€Ÿè½¬æ¢ä¸ºå¸ƒå°”å€¼ true æˆ– falseã€‚å°±æ˜¯è¿™æ ·ï¼š const greeting = 'Hello there!'; console.log(!!greeting) // returns true const noGreeting = ''; console.log(!!noGreeting); // returns false 8. å­—ç¬¦ä¸²å’Œæ•´æ•°è½¬æ¢ ä½¿ç”¨ + è¿ç®—ç¬¦å¿«é€Ÿå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š const stringNumer = '123'; console.log(+stringNumer); // returns integer 123 console.log(typeof +stringNumer); // returns 'number' è¦å°†æ•°å­—å¿«é€Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨ + è¿ç®—ç¬¦åè·Ÿç©ºå­—ç¬¦ä¸² &quot;&quot;ï¼š const myString = 25 + ''; console.log(myString); // returns '25' console.log(typeof myString); // returns 'string' è¿™äº›ç±»å‹è½¬æ¢éå¸¸æ–¹ä¾¿ï¼Œä½†å®ƒä»¬çš„æ¸…æ™°åº¦å’Œä»£ç å¯è¯»æ€§è¾ƒå·®ã€‚å› æ­¤ï¼Œåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä¸€ä¸‹ã€‚ä¸è¿‡å¯ä»¥ç”¨æ‰code golfä¸­ã€‚ 9. æ£€æŸ¥æ•°ç»„ä¸­çš„å‡å€¼ ä½ ç†Ÿæ‚‰ filterã€some å’Œ every æ•°ç»„æ–¹æ³•ã€‚ä½†ä½ ä¹Ÿåº”è¯¥çŸ¥é“ï¼Œä½ å¯ä»¥ä»…ä½¿ç”¨å¸ƒå°”æ–¹æ³•æ¥æµ‹è¯•çœŸå€¼ï¼š const myArray = [null, false, 'Hello', undefined, 0]; // filter falsy values const filtered = myArray.filter(Boolean); console.log(filtered); // returns ['Hello'] // check if at least one value is truthy const anyTruthy = myArray.some(Boolean); console.log(anyTruthy); // returns true // check if all values are truthy const allTruthy = myArray.every(Boolean); console.log(allTruthy); // returns false è¿™æ˜¯å®ƒçš„å·¥ä½œåŸç†ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™äº›æ•°ç»„æ–¹æ³•é‡‡ç”¨å›è°ƒå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å°†å¸ƒå°”å€¼ä½œä¸ºå›è°ƒå‡½æ•°ä¼ é€’ã€‚ Boolean æœ¬èº«æ¥å—ä¸€ä¸ªå‚æ•°å¹¶æ ¹æ®å‚æ•°çš„çœŸå®æ€§è¿”å›trueæˆ– falseã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è¯´ï¼š myArray.filter(val =&gt; Boolean(val)); æ˜¯ä¸æ˜¯å’Œè¿™ä¸ªä¸€æ ·ï¼š myArray.filter(Boolean); 10.å±•å¹³æ•°ç»„ åŸå‹ Array ä¸Šæœ‰ä¸€ä¸ªæ–¹æ³• flat å¯ä»¥è®©ä½ ä»æ•°ç»„çš„æ•°ç»„ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼š const myArray = [{ id: 1 }, [{ id: 2 }], [{ id: 3 }]]; const flattedArray = myArray.flat(); // returns [ { id: 1 }, { id: 2 }, { id: 3 } ä½ è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªæ·±åº¦çº§åˆ«ï¼ŒæŒ‡å®šåµŒå¥—æ•°ç»„ç»“æ„åº”å±•å¹³çš„æ·±åº¦ã€‚ä¾‹å¦‚ï¼š const arr = [0, 1, 2, [[[3, 4]]]]; console.log(arr.flat(2)); // returns [0, 1, 2, [3,4]] ç»“è¯­ æ„Ÿè°¢ä½ é˜…è¯»åˆ°æœ€åã€‚æˆ‘å¸Œæœ›è¿™äº›æŠ€å·§å¯¹ä½ æœ‰ç”¨ã€‚ ","link":"https://umeimmense.github.io/post/shi-ge-chang-yong-de-javascript-shi-yong-ji-qiao"}]}